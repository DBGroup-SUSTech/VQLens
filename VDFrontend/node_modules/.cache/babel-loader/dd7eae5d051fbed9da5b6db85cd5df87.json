{"remainingRequest":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js!/home/yansha/VDProject/VDFrontend/src/components/Embedding/Embedding.js","dependencies":[{"path":"/home/yansha/VDProject/VDFrontend/src/components/Embedding/Embedding.js","mtime":1735825221826},{"path":"/home/yansha/VDProject/VDFrontend/babel.config.js","mtime":1730469387355},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js","mtime":1735202380921}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5yZWR1Y2UuanMiOwppbXBvcnQgZDMgZnJvbSAnLi4vLi4vdXRpbHMvZDMtaW1wb3J0JzsKaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi4vLi4vY29uZmlnL2NvbmZpZyc7CmltcG9ydCB7IHVwZGF0ZVBvcHBlclRvb2x0aXAgfSBmcm9tICcuL0VtYmVkZGluZ0xhYmVsJzsKaW1wb3J0IGZyYWdtZW50U2hhZGVyIGZyb20gJy4vc2hhZGVycy9wb2ludC5mcmFnP3Jhdyc7CmltcG9ydCB2ZXJ0ZXhTaGFkZXIgZnJvbSAnLi9zaGFkZXJzL3BvaW50LnZlcnQ/cmF3JzsKaW1wb3J0ICogYXMgTGFiZWxlciBmcm9tICcuL0VtYmVkZGluZ0xhYmVsJzsKaW1wb3J0IHsgR3JvdXAgfSBmcm9tICd0aHJlZS9zcmMvVGhyZWUuQ29yZS5qcyc7CmxldCBwb2ludE1vdXNlZW50ZXJUaW1lciA9IG51bGw7CmxldCBwb2ludE1vdXNlbGVhdmVUaW1lciA9IG51bGw7CmV4cG9ydCBmdW5jdGlvbiBpbml0V2ViR0xNYXRyaWNlcyh0aGF0KSB7CiAgLy8gQ29udmVydCB0aGUgeCBhbmQgeSBzY2FsZXMgdG8gYSBtYXRyaXggKGFwcGx5aW5nIHNjYWxlIGlzIGNoZWFwZXIgaW4gR1BVKQoKICBjb25zdCB4RG9tYWluTWlkID0gKHRoYXQueFNjYWxlLmRvbWFpbigpWzBdICsgdGhhdC54U2NhbGUuZG9tYWluKClbMV0pIC8gMjsKICBjb25zdCB5RG9tYWluTWlkID0gKHRoYXQueVNjYWxlLmRvbWFpbigpWzBdICsgdGhhdC55U2NhbGUuZG9tYWluKClbMV0pIC8gMjsKICBjb25zdCB4UmFuZ2VNaWQgPSAodGhhdC54U2NhbGUucmFuZ2UoKVswXSArIHRoYXQueFNjYWxlLnJhbmdlKClbMV0pIC8gMjsKICBjb25zdCB5UmFuZ2VNaWQgPSAodGhhdC55U2NhbGUucmFuZ2UoKVswXSArIHRoYXQueVNjYWxlLnJhbmdlKClbMV0pIC8gMjsKICBjb25zdCB4TXVsdGlwbGllciA9ICh0aGF0LnhTY2FsZS5yYW5nZSgpWzFdIC0gdGhhdC54U2NhbGUucmFuZ2UoKVswXSkgLyAodGhhdC54U2NhbGUuZG9tYWluKClbMV0gLSB0aGF0LnhTY2FsZS5kb21haW4oKVswXSk7CiAgY29uc3QgeU11bHRpcGxpZXIgPSAodGhhdC55U2NhbGUucmFuZ2UoKVsxXSAtIHRoYXQueVNjYWxlLnJhbmdlKClbMF0pIC8gKHRoYXQueVNjYWxlLmRvbWFpbigpWzFdIC0gdGhhdC55U2NhbGUuZG9tYWluKClbMF0pOwoKICAvLyBXZWJHTCBpcyBjb2x1bW4tbWFqb3IhCiAgLy8gVHJhbnNmb3JtIGZyb20gZGF0YSBzcGFjZSB0byBzdGFnZSBzcGFjZSAoc2FtZSBhcyBhcHBseWluZyB0aGF0LnhTY2FsZSgpLAogIC8vIGFuZCB0aGF0LnlTY2FsZSgpKQoKICBjb25zdCBkYXRhU2NhbGVNYXRyaXggPSBbW3hNdWx0aXBsaWVyLCAwLCAteE11bHRpcGxpZXIgKiB4RG9tYWluTWlkICsgeFJhbmdlTWlkXSwgWzAsIHlNdWx0aXBsaWVyLCAteU11bHRpcGxpZXIgKiB5RG9tYWluTWlkICsgeVJhbmdlTWlkXSwgWzAsIDAsIDFdXTsKCiAgLy8g6YCC5b2T6LCD5pW05bmz56e76YeP77yM5L2/5b6X57uY5Zu+5Yy65Z+f55qE5Lit5b+D5LiO6KeG5Zu+55qE5Lit5b+D5a+56b2QCiAgLy8gZGF0YVNjYWxlTWF0cml4WzBdWzJdICs9ICh0aGF0LnN2Z0Z1bGxTaXplLndpZHRoIC8gMiAtIHhSYW5nZU1pZCk7CiAgLy8gZGF0YVNjYWxlTWF0cml4WzFdWzJdICs9ICh0aGF0LnN2Z0Z1bGxTaXplLmhlaWdodCAvIDIgLSB5UmFuZ2VNaWQpOwogIGNvbnN0IGRhdGFTY2FsZU1hdHJpeDFEID0gZGF0YVNjYWxlTWF0cml4LmZsYXQoKTsKCiAgLy8gVHJhbnNmb3JtaW5nIHRoZSBzdGFnZSBzcGFjZSB0byB0aGUgbm9ybWFsaXplZCBjb29yZGluYXRlCiAgLy8gTm90ZSB3ZSBuZWVkIHRvIGZsaXAgdGhlIHkgY29vcmRpbmF0ZQogIGNvbnN0IG5vcm1hbGl6ZU1hdHJpeCA9IFtbMiAvIHRoYXQuc3ZnRnVsbFNpemUud2lkdGgsIDAsIC0xXSwgWzAsIC0yIC8gdGhhdC5zdmdGdWxsU2l6ZS5oZWlnaHQsIDFdLCBbMCwgMCwgMV1dOwogIGNvbnN0IG5vcm1hbGl6ZU1hdHJpeDFEID0gbm9ybWFsaXplTWF0cml4LmZsYXQoKTsKICB0aGF0LndlYkdMTWF0cmljZXMgPSB7CiAgICBkYXRhU2NhbGVNYXRyaXg6IGRhdGFTY2FsZU1hdHJpeDFELAogICAgbm9ybWFsaXplTWF0cml4OiBub3JtYWxpemVNYXRyaXgxRAogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGluaXRXZWJHTEJ1ZmZlcnModGhhdCkgewogIGlmICh0aGF0LmdyaWREYXRhID09PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dyaWREYXRhIGlzIG51bGwuJyk7CiAgfQoKICAvLyDojrflj5bmr4/kuKrngrnnmoTkvY3nva7lkozpopzoibIKICBjb25zdCBwb3NpdGlvbnMgPSBbXTsKICBjb25zdCB0ZXh0dXJlQ29vcmRzID0gW107CiAgZm9yIChjb25zdCBwb2ludCBvZiB0aGF0LnByb21wdFBvaW50cykgewogICAgcG9zaXRpb25zLnB1c2goW3BvaW50LngsIHBvaW50LnldKTsKICAgIHRleHR1cmVDb29yZHMucHVzaChbMCwgMF0pOwogIH0KICBsZXQgdG90YWxQb2ludFNpemUgPSB0aGF0LmdyaWREYXRhLnRvdGFsUG9pbnRTaXplOwogIHRoYXQuZnJvbnRQb3NpdGlvbkJ1ZmZlciA9IHRoYXQucG9pbnRSZWdsLmJ1ZmZlcih7CiAgICBsZW5ndGg6IHRvdGFsUG9pbnRTaXplICogNCAqIDIsCiAgICB0eXBlOiAnZmxvYXQnLAogICAgdXNhZ2U6ICdkeW5hbWljJwogIH0pOwogIHRoYXQuZnJvbnRQb3NpdGlvbkJ1ZmZlci5zdWJkYXRhKHBvc2l0aW9ucywgMCk7CiAgdGhhdC5mcm9udFRleHR1cmVDb29yZGluYXRlQnVmZmVyID0gdGhhdC5wb2ludFJlZ2wuYnVmZmVyKHsKICAgIGxlbmd0aDogdG90YWxQb2ludFNpemUgKiA0ICogMiwKICAgIHR5cGU6ICdmbG9hdCcsCiAgICB1c2FnZTogJ2R5bmFtaWMnCiAgfSk7CiAgdGhhdC5mcm9udFRleHR1cmVDb29yZGluYXRlQnVmZmVyLnN1YmRhdGEodGV4dHVyZUNvb3JkcywgMCk7CiAgdGhhdC5mcm9udEJ1ZmZlclBvaW50U2l6ZSA9IHRoYXQucHJvbXB0UG9pbnRzLmxlbmd0aDsKfQoKLyoqCiAqIERyYXcgYSBzY2F0dGVyIHBsb3QgZm9yIHRoZSBVTUFQLgogKi8KZXhwb3J0IGZ1bmN0aW9uIGRyYXdTY2F0dGVyUGxvdCh0aGF0KSB7CiAgaWYgKCF0aGF0LndlYkdMTWF0cmljZXMpIHsKICAgIHRocm93IEVycm9yKCd3ZWJHTE1hdHJpY2VzIG5vdCBpbml0aWFsaXplZCcpOwogIH0KICB0aGF0LnBvaW50UmVnbC5jbGVhcih7CiAgICBjb2xvcjogWzAsIDAsIDAsIDBdLAogICAgZGVwdGg6IDEKICB9KTsKCiAgLy8gQWRqdXN0IHBvaW50IHdpZHRoIGJhc2VkIG9uIHRoZSBudW1iZXIgb2YgcG9pbnRzIHRvIGRyYXcKICBsZXQgcG9pbnRDb3VudCA9IHRoYXQubG9hZGVkUG9pbnRDb3VudDsKCiAgLy8gTG9nYXJpdGhtaWMgcmVncmVzc2lvbiBieSBmaXR0aW5nIHRoZSBmb2xsb3dpbmcgdGhyZWUgcG9pbnRzCiAgLy8gaHR0cHM6Ly9rZWlzYW4uY2FzaW8uY29tL2V4ZWMvc3lzdGVtLzE0MDU5OTMwMjI2NjkxCiAgLy8gWyg2ZTQsIDIpLCAoM2U1LCAxKSwgWzEuOGU2LCAwLjVdXQogIGNvbnN0IGEgPSA2LjcxNjgyMDcxOwogIGNvbnN0IGIgPSAtMC40Mzc5NzQ4NzE7CiAgdGhhdC5jdXJQb2ludFdpZHRoID0gYSArIGIgKiBNYXRoLmxvZyhjb25maWcubGF5b3V0LnNjYXR0ZXJEb3RSYWRpdXMgKiAodGhhdC5zdmdGdWxsU2l6ZS5oZWlnaHQgLyAxMDAwMDAwMCkgKiBwb2ludENvdW50KTsKICB0aGF0LmN1clBvaW50V2lkdGggPSBNYXRoLm1pbig1LCB0aGF0LmN1clBvaW50V2lkdGgpOwogIHRoYXQuY3VyUG9pbnRXaWR0aCA9IE1hdGgubWF4KDAuNCwgdGhhdC5jdXJQb2ludFdpZHRoKTsKICBjb25zdCBhbHBoYSA9IDEgLyAoTWF0aC5sb2cocG9pbnRDb3VudCkgLyBNYXRoLmxvZyg1MDApKTsKCiAgLy8gR2V0IHRoZSBjdXJyZW50IHpvb20KICBjb25zdCB6b29tTWF0cml4ID0gZ2V0Wm9vbU1hdHJpeCh0aGF0LmN1clpvb21UcmFuc2Zvcm0pOwoKICAvLyBDcmVhdGUgYSB0ZXh0dXJlIGFycmF5IChkZWZhdWx0IDN4MSkKICBsZXQgdGV4dHVyZUFycmF5ID0gW2NvbmZpZy5sYXlvdXQuZGVmYXVsdFBvaW50Q29sb3JJbnRbMF0sIGNvbmZpZy5sYXlvdXQuZGVmYXVsdFBvaW50Q29sb3JJbnRbMV0sIGNvbmZpZy5sYXlvdXQuZGVmYXVsdFBvaW50Q29sb3JJbnRbMl0sIDI1NSwgY29uZmlnLmxheW91dC5zZWNvbmRQb2ludENvbG9ySW50WzBdLCBjb25maWcubGF5b3V0LnNlY29uZFBvaW50Q29sb3JJbnRbMV0sIGNvbmZpZy5sYXlvdXQuc2Vjb25kUG9pbnRDb2xvckludFsyXSwgMjU1LCAyNTUsIDI1NSwgMjU1LCAwXTsKICAvLyBbZGVmYXVsdCBjb2xvciwgc2Vjb25kIGNvbG9yLCB0cmFuc3BhcmVudCwgZW1wdHldCiAgY29uc3QgdGV4dHVyZSA9IHRoYXQucG9pbnRSZWdsLnRleHR1cmUoewogICAgd2lkdGg6IDMsCiAgICBoZWlnaHQ6IDEsCiAgICBkYXRhOiB0ZXh0dXJlQXJyYXksCiAgICBmb3JtYXQ6ICdyZ2JhJwogIH0pOwoKICAvLyBJZiB1c2VyIHNwZWNpZmllcyBhbiBhbHBoYSBsZXZlbCwgd2UgdXNlIGl0IHRvIG92ZXJyaWRlIGF1dG8tYWxwaGEKICBsZXQgdXNlckFscGhhID0gLTEuMDsKICBpZiAodGhhdC5ncmlkRGF0YSAmJiB0aGF0LmdyaWREYXRhLm9wYWNpdHkgIT09IHVuZGVmaW5lZCkgewogICAgdXNlckFscGhhID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhhdC5ncmlkRGF0YS5vcGFjaXR5LCAxKSk7CiAgfQogIGNvbnN0IGRyYXdQb2ludHMgPSB0aGF0LnBvaW50UmVnbCh7CiAgICBkZXB0aDogewogICAgICBlbmFibGU6IGZhbHNlCiAgICB9LAogICAgc3RlbmNpbDogewogICAgICBlbmFibGU6IGZhbHNlCiAgICB9LAogICAgZnJhZzogZnJhZ21lbnRTaGFkZXIsCiAgICB2ZXJ0OiB2ZXJ0ZXhTaGFkZXIsCiAgICBhdHRyaWJ1dGVzOiB7CiAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgYnVmZmVyOiB0aGF0LmZyb250UG9zaXRpb25CdWZmZXIsCiAgICAgICAgc3RyaWRlOiAyICogNCwKICAgICAgICBvZmZzZXQ6IDAKICAgICAgfSwKICAgICAgdGV4dHVyZUNvb3JkOiB7CiAgICAgICAgYnVmZmVyOiB0aGF0LmZyb250VGV4dHVyZUNvb3JkaW5hdGVCdWZmZXIsCiAgICAgICAgc3RyaWRlOiAyICogNCwKICAgICAgICBvZmZzZXQ6IDAKICAgICAgfQogICAgfSwKICAgIHVuaWZvcm1zOiB7CiAgICAgIC8vIFBsYWNlaG9sZGVyIGZvciBmdW5jdGlvbiBwYXJhbWV0ZXJzCiAgICAgIHBvaW50V2lkdGg6IDEuMiwKICAgICAgZGF0YVNjYWxlTWF0cml4OiB0aGF0LndlYkdMTWF0cmljZXMuZGF0YVNjYWxlTWF0cml4LAogICAgICB6b29tTWF0cml4OiB6b29tTWF0cml4LAogICAgICBub3JtYWxpemVNYXRyaXg6IHRoYXQud2ViR0xNYXRyaWNlcy5ub3JtYWxpemVNYXRyaXgsCiAgICAgIGFscGhhOiBhbHBoYSwKICAgICAgdXNlckFscGhhOiB1c2VyQWxwaGEsCiAgICAgIHRleHR1cmU6IHRleHR1cmUKICAgIH0sCiAgICBibGVuZDogewogICAgICBlbmFibGU6IHRydWUsCiAgICAgIGZ1bmM6IHsKICAgICAgICBzcmNSR0I6ICdvbmUnLAogICAgICAgIHNyY0FscGhhOiAnb25lJywKICAgICAgICBkc3RSR0I6ICdvbmUgbWludXMgc3JjIGFscGhhJywKICAgICAgICBkc3RBbHBoYTogJ29uZSBtaW51cyBzcmMgYWxwaGEnCiAgICAgIH0KICAgIH0sCiAgICBjb3VudDogdGhhdC5mcm9udEJ1ZmZlclBvaW50U2l6ZSwKICAgIHByaW1pdGl2ZTogJ3BvaW50cycKICB9KTsKICBkcmF3UG9pbnRzKCk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGRyYXdHcm91cENvbnRvdXIodGhhdCwgZ3JvdXApIHsKICB2YXIgX3RoYXQkZ3JvdXBOYW1lczsKICBpZiAodGhhdC5ncmlkRGF0YSA9PSBudWxsIHx8IHRoYXQuZ3JpZERhdGEuZ3JvdXBHcmlkcyA9PSB1bmRlZmluZWQpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ0dyaWQgZGF0YSBub3QgaW5pdGlhbGl6ZWQnKTsKICAgIHJldHVybiBudWxsOwogIH0KICBjb25zdCBjb250b3VyR3JvdXAgPSB0aGF0LnN2Zy5zZWxlY3QoYC5jb250b3VyLWdyb3VwLSR7Z3JvdXB9YCk7CiAgY29uc3QgZ3JpZERhdGExRCA9IFtdOwogIGNvbnN0IGdyaWQgPSB0aGF0LmdyaWREYXRhLmdyb3VwR3JpZHNbZ3JvdXBdOwogIGZvciAoY29uc3Qgcm93IG9mIGdyaWQpIHsKICAgIGZvciAoY29uc3QgaXRlbSBvZiByb3cpIHsKICAgICAgZ3JpZERhdGExRC5wdXNoKGl0ZW0pOwogICAgfQogIH0KCiAgLy8gTGluZWFyIGludGVycG9sYXRlIHRoZSBsZXZlbHMgdG8gZGV0ZXJtaW5lIHRoZSB0aHJlc2hvbGRzCiAgY29uc3QgbGV2ZWxzID0gY29uZmlnLmxheW91dC5jb250b3VyTGV2ZWxzOwogIGNvbnN0IHRocmVzaG9sZHMgPSBbXTsKICBjb25zdCBtaW5WYWx1ZSA9IE1hdGgubWluKC4uLmdyaWREYXRhMUQpOwogIGNvbnN0IG1heFZhbHVlID0gTWF0aC5tYXgoLi4uZ3JpZERhdGExRCk7CiAgY29uc3Qgc3RlcCA9IChtYXhWYWx1ZSAtIG1pblZhbHVlKSAvIGxldmVsczsKICBmb3IgKGxldCBpID0gMDsgaSA8IGxldmVsczsgaSsrKSB7CiAgICB0aHJlc2hvbGRzLnB1c2gobWluVmFsdWUgKyBzdGVwICogaSk7CiAgfQogIGxldCBjb250b3VycyA9IGQzLmNvbnRvdXJzKCkudGhyZXNob2xkcyh0aHJlc2hvbGRzKS5zaXplKFtncmlkLmxlbmd0aCwgZ3JpZFswXS5sZW5ndGhdKShncmlkRGF0YTFEKTsKCiAgLy8gQ29udmVydCB0aGUgc2NhbGUgb2YgdGhlIGdlbmVyYXRlZCBwYXRocwogIGNvbnN0IGNvbnRvdXJYU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgZ3JpZC5sZW5ndGhdKS5yYW5nZSh0aGF0LmdyaWREYXRhLnhSYW5nZSk7CiAgY29uc3QgY29udG91cllTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCBncmlkWzBdLmxlbmd0aF0pLnJhbmdlKHRoYXQuZ3JpZERhdGEueVJhbmdlKTsKICBjb250b3VycyA9IGNvbnRvdXJzLm1hcChpdGVtID0+IHsKICAgIGl0ZW0uY29vcmRpbmF0ZXMgPSBpdGVtLmNvb3JkaW5hdGVzLm1hcChjb29yZGluYXRlcyA9PiB7CiAgICAgIHJldHVybiBjb29yZGluYXRlcy5tYXAocG9zaXRpb25zID0+IHsKICAgICAgICByZXR1cm4gcG9zaXRpb25zLm1hcChwb2ludCA9PiB7CiAgICAgICAgICByZXR1cm4gW3RoYXQueFNjYWxlKGNvbnRvdXJYU2NhbGUocG9pbnRbMF0pKSwKICAgICAgICAgIC8vIHRoYXQueFNjYWxlKGNvbnRvdXJYU2NhbGUocG9pbnRbMF0pKSArICh0aGF0LnN2Z0Z1bGxTaXplLndpZHRoIC0gdGhhdC5zdmdGdWxsU2l6ZS5oZWlnaHQpIC8gMiwKICAgICAgICAgIHRoYXQueVNjYWxlKGNvbnRvdXJZU2NhbGUocG9pbnRbMV0pKV07CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gaXRlbTsKICB9KTsKCiAgLy8gQ3JlYXRlIGEgbmV3IGNvbG9yIGludGVycG9sYXRvcgogIC8vIChzdGFydGluZyBmcm9tIHdoaXRlIGhlcmUpCiAgY29uc3QgY29sb3JTY2FsZUludGVycG9sYXRvciA9IGQzLmludGVycG9sYXRlTGFiKCcjZmZmZmZmJywgY29uZmlnLmxheW91dFsnZ3JvdXBDb2xvcnMnXVsoKF90aGF0JGdyb3VwTmFtZXMgPSB0aGF0Lmdyb3VwTmFtZXMpID09PSBudWxsIHx8IF90aGF0JGdyb3VwTmFtZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGF0JGdyb3VwTmFtZXMuaW5kZXhPZihncm91cCkpIHx8IDBdKTsKICBjb25zdCBjb2xvclNjYWxlID0gZDMuc2NhbGVTZXF1ZW50aWFsKGQzLmV4dGVudCh0aHJlc2hvbGRzKSwgZCA9PiBjb2xvclNjYWxlSW50ZXJwb2xhdG9yKGQgLyAxKSk7CgogIC8vIERyYXcgdGhlIGNvbnRvdXJzCiAgY29udG91ckdyb3VwLnNlbGVjdEFsbCgncGF0aCcpLmRhdGEoY29udG91cnMuc2xpY2UoMSkpLmpvaW4oJ3BhdGgnKS5hdHRyKCdmaWxsJywgZCA9PiBjb2xvclNjYWxlKGQudmFsdWUpKS5hdHRyKCdkJywgZDMuZ2VvUGF0aCgpKTsKICByZXR1cm4gY29udG91cnM7Cn0KOwoKLyoqCiAqIENvbnZlcnQgdGhlIGN1cnJlbnQgem9vbSB0cmFuc2Zvcm0gaW50byBhIG1hdHJpeAogKiBAcGFyYW0gem9vbVRyYW5zZm9ybSBEMyB6b29tIHRyYW5zZm9ybQogKiBAcmV0dXJucyAxRCBtYXRyaXgKICovCmNvbnN0IGdldFpvb21NYXRyaXggPSB6b29tVHJhbnNmb3JtID0+IHsKICAvLyBUcmFuc2Zvcm1pbmcgdGhlIHN0YWdlIHNwYWNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IHpvb20gdHJhbnNmb3JtCiAgY29uc3Qgem9vbU1hdHJpeCA9IFtbem9vbVRyYW5zZm9ybS5rLCAwLCB6b29tVHJhbnNmb3JtLnhdLCBbMCwgem9vbVRyYW5zZm9ybS5rLCB6b29tVHJhbnNmb3JtLnldLCBbMCwgMCwgMV1dOwogIGNvbnN0IHpvb21NYXRyaXgxRCA9IHpvb21NYXRyaXguZmxhdCgpOwogIHJldHVybiB6b29tTWF0cml4MUQ7Cn07CmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVXZWJHTEJ1ZmZlcnModGhhdCwgbmV3UG9pbnRzKSB7CiAgLy8gR2V0IHRoZSBwb3NpdGlvbiBhbmQgY29sb3Igb2YgZWFjaCBuZXcgcG9pbnQKICBjb25zdCBwb3NpdGlvbnMgPSBbXTsKICBjb25zdCB0ZXh0dXJlQ29vcmRzID0gW107CiAgZm9yIChjb25zdCBwb2ludCBvZiBuZXdQb2ludHMpIHsKICAgIHBvc2l0aW9ucy5wdXNoKFtwb2ludC54LCBwb2ludC55XSk7CiAgICBpZiAodGhhdC50aW1lVGV4dHVyZU1hcCA9PT0gbnVsbCkgewogICAgICBpZiAodGhhdC5ncm91cE5hbWVzICYmIHBvaW50Lmdyb3VwSUQgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHRleHR1cmVDb29yZHMucHVzaChbcG9pbnQuZ3JvdXBJRCAvIHRoYXQuZ3JvdXBOYW1lcy5sZW5ndGgsIDBdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZXh0dXJlQ29vcmRzLnB1c2goWzAsIDBdKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKHRoYXQudGltZVRleHR1cmVNYXAuaGFzKHBvaW50LnRpbWUpKSB7CiAgICAgICAgY29uc3QgdSA9IHRoYXQudGltZVRleHR1cmVNYXAuZ2V0KHBvaW50LnRpbWUpIC8gKHRoYXQudGltZVRleHR1cmVNYXAuc2l6ZSAtIDEpOwogICAgICAgIHRleHR1cmVDb29yZHMucHVzaChbdSwgMC41XSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVGhlIGxhc3QgZW50cnkgaW4gdGhlIHRleHR1cmUgYXJyYXkgaXMgcmVzZXJ2ZWQgZm9yICdiYWQnIHBvaW50cwogICAgICAgIC8vIChlLmcuLCB3cm9uZyB5ZWFyKQogICAgICAgIHRleHR1cmVDb29yZHMucHVzaChbMSwgMF0pOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBVcGRhdGUgdGhlIGJ1ZmZlciB1c2luZyBieXRlIG9mZnNldHMKICB0aGF0LmZyb250UG9zaXRpb25CdWZmZXIuc3ViZGF0YShwb3NpdGlvbnMsIHRoYXQuZnJvbnRCdWZmZXJQb2ludFNpemUgKiAyICogNCk7CiAgdGhhdC5mcm9udFRleHR1cmVDb29yZGluYXRlQnVmZmVyLnN1YmRhdGEodGV4dHVyZUNvb3JkcywgdGhhdC5mcm9udEJ1ZmZlclBvaW50U2l6ZSAqIDIgKiA0KTsKICB0aGF0LmZyb250QnVmZmVyUG9pbnRTaXplICs9IG5ld1BvaW50cy5sZW5ndGg7Cn0KZXhwb3J0IGZ1bmN0aW9uIGhpZ2hsaWdodFBvaW50KHRoYXQsIGFyZ3MpIHsKICBjb25zdCBvZmZ4ID0gMDsKICBjb25zdCB7CiAgICBwb2ludCwKICAgIGFuaW1hdGVkCiAgfSA9IGFyZ3M7CiAgaWYgKCFhbnlUcnVlKHRoYXQuc2hvd1BvaW50cykpIHJldHVybjsKICBpZiAocG9pbnQgPT09IHRoYXQuaG92ZXJQb2ludCkgcmV0dXJuOwogIGlmICh0aGF0LmhpZGVIaWdobGlnaHRzKSByZXR1cm47CgogIC8vIERyYXcgdGhlIHBvaW50IG9uIHRoZSB0b3Agc3ZnCiAgY29uc3QgZ3JvdXAgPSB0aGF0LnRvcFN2Zy5zZWxlY3QoJ2cudG9wLWNvbnRlbnQgZy5oaWdobGlnaHRzJyk7CiAgY29uc3Qgb2xkSGlnaGxpZ2h0UG9pbnQgPSBncm91cC5zZWxlY3QoJ2NpcmNsZS5oaWdobGlnaHQtcG9pbnQnKTsKCiAgLy8g5pW05L2T5ZCR5Y+z6L+b6KGM5YGP56e7IAoKICAvLyBIb3ZlcmluZyBlbXB0eSBzcGFjZQogIGlmIChwb2ludCA9PT0gdW5kZWZpbmVkKSB7CiAgICBpZiAocG9pbnRNb3VzZWxlYXZlVGltZXIgIT09IG51bGwpIHsKICAgICAgY2xlYXJUaW1lb3V0KHBvaW50TW91c2VsZWF2ZVRpbWVyKTsKICAgICAgcG9pbnRNb3VzZWxlYXZlVGltZXIgPSBudWxsOwogICAgfQogICAgaWYgKHBvaW50TW91c2VlbnRlclRpbWVyICE9PSBudWxsKSB7CiAgICAgIGNsZWFyVGltZW91dChwb2ludE1vdXNlZW50ZXJUaW1lcik7CiAgICAgIHBvaW50TW91c2VlbnRlclRpbWVyID0gbnVsbDsKICAgIH0KCiAgICAvLyBDbGVhciB0aGUgaGlnaGxpZ2h0IGFuZCB0b29sdGlwIGluIGEgc2hvcnQgZGVsYXkKICAgIHBvaW50TW91c2VsZWF2ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHRoYXQuaG92ZXJQb2ludCA9IG51bGw7CiAgICAgIHRoYXQudG9vbHRpcFRvcC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgb2xkSGlnaGxpZ2h0UG9pbnQucmVtb3ZlKCk7CiAgICAgIHBvaW50TW91c2VsZWF2ZVRpbWVyID0gbnVsbDsKICAgIH0sIDUwKTsKICAgIHJldHVybjsKICB9CgogIC8vIEhvdmVyaW5nIG92ZXIgYSBwb2ludAogIHRoYXQuaG92ZXJQb2ludCA9IHBvaW50OwoKICAvLyBDaGFuZ2UgdGhlIHBvaW50J3MgdGV4dCB0byBhbiBpbWFnZSB0YWcgaWYgdGhpcyBpcyBhbiBpbWFnZSBwb2ludAogIGlmICh0aGF0LmdyaWREYXRhICYmIHRoYXQuZ3JpZERhdGEuaW1hZ2UgIT09IHVuZGVmaW5lZCkgewogICAgaWYgKHRoYXQuZ3JpZERhdGEuaW1hZ2UuaW1hZ2VHcm91cCA9PT0gdGhhdC5ob3ZlclBvaW50Lmdyb3VwSUQpIHsKICAgICAgdGhhdC5ob3ZlclBvaW50LnByb21wdCA9IGA8aW1nIGNsYXNzPSJ0b29sdGlwLWltYWdlIiBzcmM9IiR7dGhhdC5ncmlkRGF0YS5pbWFnZS5pbWFnZVVSTFByZWZpeCArIHRoYXQuaG92ZXJQb2ludC5wcm9tcHR9Ij5gOwogICAgfQogIH0KICBpZiAocG9pbnRNb3VzZWxlYXZlVGltZXIgIT09IG51bGwpIHsKICAgIGNsZWFyVGltZW91dChwb2ludE1vdXNlbGVhdmVUaW1lcik7CiAgICBwb2ludE1vdXNlbGVhdmVUaW1lciA9IG51bGw7CiAgfQogIGNvbnN0IGhpZ2hsaWdodFJhZGl1cyA9IE1hdGgubWF4KDEwIC8gdGhhdC5jdXJab29tVHJhbnNmb3JtLmssIHRoYXQuY3VyUG9pbnRXaWR0aCAqIE1hdGguZXhwKE1hdGgubG9nKHRoYXQuY3VyWm9vbVRyYW5zZm9ybS5rKSAqIDAuNTUpIC8gdGhhdC5jdXJab29tVHJhbnNmb3JtLmspOwogIGNvbnN0IGhpZ2hsaWdodFN0cm9rZSA9IDEuMiAvIHRoYXQuY3VyWm9vbVRyYW5zZm9ybS5rOwogIGxldCBjdXJIaWdobGlnaHRQb2ludDsgLy8g55So5LqO5a2Y5YKo5b2T5YmN6auY5Lqu54K555qE6YCJ5oup5ZmoCgogIC8vIOWmguaenOayoeaciemrmOS6rueCuQogIGlmIChvbGRIaWdobGlnaHRQb2ludC5lbXB0eSgpKSB7CiAgICBjdXJIaWdobGlnaHRQb2ludCA9IGdyb3VwLmFwcGVuZCgnY2lyY2xlJykuYXR0cignY2xhc3MnLCAnaGlnaGxpZ2h0LXBvaW50JykuYXR0cignY3gnLCB0aGF0LnhTY2FsZShwb2ludC54KSArIG9mZngpLmF0dHIoJ2N5JywgdGhhdC55U2NhbGUocG9pbnQueSkpLmF0dHIoJ3InLCBoaWdobGlnaHRSYWRpdXMpLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBoaWdobGlnaHRTdHJva2UpOwogIH0gZWxzZSB7CiAgICAvLyDlpoLmnpzlt7LmnInpq5jkuq7ngrkKICAgIGN1ckhpZ2hsaWdodFBvaW50ID0gb2xkSGlnaGxpZ2h0UG9pbnQ7CiAgICBpZiAoYW5pbWF0ZWQpIHsKICAgICAgY3VySGlnaGxpZ2h0UG9pbnQudHJhbnNpdGlvbigpLmR1cmF0aW9uKDE1MCkuYXR0cignY3gnLCB0aGF0LnhTY2FsZShwb2ludC54KSArIG9mZngpLmF0dHIoJ2N5JywgdGhhdC55U2NhbGUocG9pbnQueSkpLmF0dHIoJ3InLCBoaWdobGlnaHRSYWRpdXMpLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBoaWdobGlnaHRTdHJva2UpLm9uKCdlbmQnLCAoKSA9PiB7CiAgICAgICAgdXBkYXRlUG9wcGVyVG9vbHRpcCh0aGF0LnRvb2x0aXBUb3AsIGN1ckhpZ2hsaWdodFBvaW50Lm5vZGUoKSwgcG9pbnQucHJvbXB0LCAndG9wJyk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY3VySGlnaGxpZ2h0UG9pbnQuYXR0cignY3gnLCB0aGF0LnhTY2FsZShwb2ludC54KSArIG9mZngpLmF0dHIoJ2N5JywgdGhhdC55U2NhbGUocG9pbnQueSkpLmF0dHIoJ3InLCBoaWdobGlnaHRSYWRpdXMpLnN0eWxlKCdzdHJva2Utd2lkdGgnLCBoaWdobGlnaHRTdHJva2UpOwogICAgICB1cGRhdGVQb3BwZXJUb29sdGlwKHRoYXQudG9vbHRpcFRvcCwgY3VySGlnaGxpZ2h0UG9pbnQubm9kZSgpLCBwb2ludC5wcm9tcHQsICd0b3AnKTsKICAgIH0KICB9CiAgaWYgKHBvaW50TW91c2VlbnRlclRpbWVyICE9PSBudWxsKSB7CiAgICBjbGVhclRpbWVvdXQocG9pbnRNb3VzZWVudGVyVGltZXIpOwogIH0KICBwb2ludE1vdXNlZW50ZXJUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgdGhhdC50b29sdGlwVG9wLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgcG9pbnRNb3VzZWVudGVyVGltZXIgPSBudWxsOwogIH0sIDMwMCk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlHcm91cENoYW5nZWQodGhhdCwgZ3JvdXApIHsKICBjb25zb2xlLmxvZygi5pWw5o2uLi4uLiIsIHRoYXQuZ3JvdXBOYW1lcyk7CiAgaWYgKGdyb3VwICE9PSB1bmRlZmluZWQpIHsKICAgIC8vIHVzZXIgaGF2ZSBzcGVjaWZpZWQgZ3JvdXBzCiAgICBpZiAodGhhdC5ncm91cE5hbWVzKSB7CiAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSB0aGF0Lmdyb3VwTmFtZXMuaW5kZXhPZihncm91cCk7CiAgICAgIHRoYXQuc2hvd0NvbnRvdXJzW2dyb3VwSW5kZXhdID0gdHJ1ZTsKICAgICAgdGhhdC5zdmcuc2VsZWN0KGBnLmNvbnRvdXItZ3JvdXAtJHtncm91cH1gKS5jbGFzc2VkKCdoaWRkZW4nLCAhdGhhdC5zaG93Q29udG91cnNbZ3JvdXBJbmRleF0pOwoKICAgICAgLy8gaWYgKHRoYXQuc2hvd0xhYmVsKSB7CiAgICAgIC8vICAgICB0aGF0LmxheW91dFRvcGljTGFiZWxzKHRoYXQudXNlck1heExhYmVsTnVtLCB0cnVlKTsKICAgICAgLy8gfQogICAgfSBlbHNlIHsKICAgICAgdGhhdC5zaG93Q29udG91cnMgPSBuZXcgQXJyYXkodGhhdC5zaG93Q29udG91cnMubGVuZ3RoKS5maWxsKHRydWUpOwogICAgICBjb25zdCBjb250b3VyR3JvdXAgPSB0aGF0LnN2Zy5zZWxlY3QoJ2cuY29udG91ci1ncm91cCcpLnN0eWxlKCdvcGFjaXR5JywgbnVsbCkuY2xhc3NlZCgnaGlkZGVuJywgIXRoYXQuc2hvd0NvbnRvdXJzWzBdKTsKICAgICAgdGhhdC5zdmcuc2VsZWN0KCdnLmNvbnRvdXItZ3JvdXAtdGltZScpLmNsYXNzZWQoJ2hpZGRlbicsICF0aGF0LnNob3dDb250b3Vyc1swXSk7CiAgICB9CiAgfQogIGNvbnNvbGUubG9nKCLmlbDmja4uLi4uIiwgdGhhdC5zaG93Q29udG91cnMsIHRoYXQuc2hvd1BvaW50cyk7CiAgaWYgKGdyb3VwICE9PSB1bmRlZmluZWQpIHsKICAgIGlmICh0aGF0Lmdyb3VwTmFtZXMgPT09IG51bGwpIHsKICAgICAgdGhyb3cgRXJyb3IoJ2dyb3VwTmFtZXMgaXMgbnVsbCcpOwogICAgfQoKICAgIC8vIE9ubHkgc2hvdyBvbmUgZ3JvdXAncyBwb2ludAogICAgY29uc3QgZ3JvdXBJbmRleCA9IHRoYXQuZ3JvdXBOYW1lcy5pbmRleE9mKGdyb3VwKTsKICAgIHRoYXQuc2hvd1BvaW50c1tncm91cEluZGV4XSA9IHRydWU7CiAgfSBlbHNlIHsKICAgIHRoYXQuc2hvd1BvaW50cyA9IG5ldyBBcnJheSh0aGF0LnNob3dQb2ludHMubGVuZ3RoKS5maWxsKHRydWUpOwogIH0KICBjb25zb2xlLmxvZygi5pWw5o2uLi4uLiIsIHRoYXQuc2hvd0NvbnRvdXJzLCB0aGF0LnNob3dQb2ludHMpOwogIHRoYXQucG9pbnRDYW52YXMuY2xhc3NlZCgnaGlkZGVuJywgIWFueVRydWUodGhhdC5zaG93UG9pbnRzKSkuY2xhc3NlZCgnZmFkZWQnLCBhbnlUcnVlKHRoYXQuc2hvd1BvaW50cykgJiYgdGhhdC5zaG93TGFiZWwpOwogIGRyYXdTY2F0dGVyUGxvdCh0aGF0KTsKICBpZiAodGhhdC5zaG93R3JpZCkgTGFiZWxlci5yZWRyYXdUb3BpY0dyaWQodGhhdCwgbnVsbCk7Cn0KZXhwb3J0IGNvbnN0IGFueVRydWUgPSBpdGVtcyA9PiBpdGVtcy5yZWR1Y2UoKGEsIGIpID0+IGEgfHwgYik7CmV4cG9ydCBjb25zdCBhbGxUcnVlID0gaXRlbXMgPT4gaXRlbXMucmVkdWNlKChhLCBiKSA9PiBhICYmIGIpOw=="},{"version":3,"names":["d3","config","updatePopperTooltip","fragmentShader","vertexShader","Labeler","Group","pointMouseenterTimer","pointMouseleaveTimer","initWebGLMatrices","that","xDomainMid","xScale","domain","yDomainMid","yScale","xRangeMid","range","yRangeMid","xMultiplier","yMultiplier","dataScaleMatrix","dataScaleMatrix1D","flat","normalizeMatrix","svgFullSize","width","height","normalizeMatrix1D","webGLMatrices","initWebGLBuffers","gridData","Error","positions","textureCoords","point","promptPoints","push","x","y","totalPointSize","frontPositionBuffer","pointRegl","buffer","length","type","usage","subdata","frontTextureCoordinateBuffer","frontBufferPointSize","drawScatterPlot","clear","color","depth","pointCount","loadedPointCount","a","b","curPointWidth","Math","log","layout","scatterDotRadius","min","max","alpha","zoomMatrix","getZoomMatrix","curZoomTransform","textureArray","defaultPointColorInt","secondPointColorInt","texture","data","format","userAlpha","opacity","undefined","drawPoints","enable","stencil","frag","vert","attributes","position","stride","offset","textureCoord","uniforms","pointWidth","blend","func","srcRGB","srcAlpha","dstRGB","dstAlpha","count","primitive","drawGroupContour","group","_that$groupNames","groupGrids","console","error","contourGroup","svg","select","gridData1D","grid","row","item","levels","contourLevels","thresholds","minValue","maxValue","step","i","contours","size","contourXScale","scaleLinear","xRange","contourYScale","yRange","map","coordinates","colorScaleInterpolator","interpolateLab","groupNames","indexOf","colorScale","scaleSequential","extent","d","selectAll","slice","join","attr","value","geoPath","zoomTransform","k","zoomMatrix1D","updateWebGLBuffers","newPoints","timeTextureMap","groupID","has","time","u","get","highlightPoint","args","offx","animated","anyTrue","showPoints","hoverPoint","hideHighlights","topSvg","oldHighlightPoint","clearTimeout","setTimeout","tooltipTop","classList","add","remove","image","imageGroup","prompt","imageURLPrefix","highlightRadius","exp","highlightStroke","curHighlightPoint","empty","append","style","transition","duration","on","node","displayGroupChanged","groupIndex","showContours","classed","Array","fill","pointCanvas","showLabel","showGrid","redrawTopicGrid","items","reduce","allTrue"],"sources":["/home/yansha/VDProject/VDFrontend/src/components/Embedding/Embedding.js"],"sourcesContent":["import d3 from '../../utils/d3-import';\nimport { config } from '../../config/config';\nimport { updatePopperTooltip } from './EmbeddingLabel';\nimport fragmentShader from './shaders/point.frag?raw';\nimport vertexShader from './shaders/point.vert?raw';\nimport * as Labeler from './EmbeddingLabel';\nimport { Group } from 'three/src/Three.Core.js';\n\nlet pointMouseenterTimer = null;\nlet pointMouseleaveTimer = null;\n\nexport function initWebGLMatrices(that) {\n    // Convert the x and y scales to a matrix (applying scale is cheaper in GPU)\n\n    const xDomainMid = (that.xScale.domain()[0] + that.xScale.domain()[1]) / 2;\n    const yDomainMid = (that.yScale.domain()[0] + that.yScale.domain()[1]) / 2;\n\n    const xRangeMid = (that.xScale.range()[0] + that.xScale.range()[1]) / 2;\n    const yRangeMid = (that.yScale.range()[0] + that.yScale.range()[1]) / 2;\n\n    const xMultiplier =\n        (that.xScale.range()[1] - that.xScale.range()[0]) /\n        (that.xScale.domain()[1] - that.xScale.domain()[0]);\n\n    const yMultiplier =\n        (that.yScale.range()[1] - that.yScale.range()[0]) /\n        (that.yScale.domain()[1] - that.yScale.domain()[0]);\n\n    // WebGL is column-major!\n    // Transform from data space to stage space (same as applying that.xScale(),\n    // and that.yScale())\n\n    const dataScaleMatrix = [\n        [xMultiplier, 0, -xMultiplier * xDomainMid + xRangeMid],\n        [0, yMultiplier, -yMultiplier * yDomainMid + yRangeMid],\n        [0, 0, 1]\n    ];\n\n    // 适当调整平移量，使得绘图区域的中心与视图的中心对齐\n    // dataScaleMatrix[0][2] += (that.svgFullSize.width / 2 - xRangeMid);\n    // dataScaleMatrix[1][2] += (that.svgFullSize.height / 2 - yRangeMid);\n    const dataScaleMatrix1D = dataScaleMatrix.flat();\n\n    // Transforming the stage space to the normalized coordinate\n    // Note we need to flip the y coordinate\n    const normalizeMatrix = [\n        [2 / that.svgFullSize.width, 0, -1],\n        [0, -2 / that.svgFullSize.height, 1],\n        [0, 0, 1]\n    ];\n\n    const normalizeMatrix1D = normalizeMatrix.flat();\n\n    that.webGLMatrices = {\n        dataScaleMatrix: dataScaleMatrix1D,\n        normalizeMatrix: normalizeMatrix1D\n    };\n\n}\n\nexport function initWebGLBuffers(that) {\n    if (that.gridData === null) {\n        throw new Error('GridData is null.');\n    }\n\n    // 获取每个点的位置和颜色\n    const positions = [];\n    const textureCoords = [];\n\n    for (const point of that.promptPoints) {\n        positions.push([point.x, point.y]);\n        textureCoords.push([0, 0]);\n    }\n\n    let totalPointSize = that.gridData.totalPointSize;\n\n    that.frontPositionBuffer = that.pointRegl.buffer({\n        length: totalPointSize * 4 * 2,\n        type: 'float',\n        usage: 'dynamic'\n    });\n    that.frontPositionBuffer.subdata(positions, 0);\n\n    that.frontTextureCoordinateBuffer = that.pointRegl.buffer({\n        length: totalPointSize * 4 * 2,\n        type: 'float',\n        usage: 'dynamic'\n    });\n    that.frontTextureCoordinateBuffer.subdata(textureCoords, 0);\n\n    that.frontBufferPointSize = that.promptPoints.length;\n}\n\n/**\n * Draw a scatter plot for the UMAP.\n */\nexport function drawScatterPlot(that) {\n    if (!that.webGLMatrices) {\n        throw Error('webGLMatrices not initialized');\n    }\n\n    that.pointRegl.clear({\n        color: [0, 0, 0, 0],\n        depth: 1\n    });\n\n    // Adjust point width based on the number of points to draw\n    let pointCount = that.loadedPointCount;\n\n\n    // Logarithmic regression by fitting the following three points\n    // https://keisan.casio.com/exec/system/14059930226691\n    // [(6e4, 2), (3e5, 1), [1.8e6, 0.5]]\n    const a = 6.71682071;\n    const b = -0.437974871;\n    that.curPointWidth =\n        a +\n        b *\n        Math.log(\n            config.layout.scatterDotRadius *\n            (that.svgFullSize.height / 10000000) *\n            pointCount\n        );\n    that.curPointWidth = Math.min(5, that.curPointWidth);\n    that.curPointWidth = Math.max(0.4, that.curPointWidth);\n    const alpha = 1 / (Math.log(pointCount) / Math.log(500));\n\n    // Get the current zoom\n    const zoomMatrix = getZoomMatrix(that.curZoomTransform);\n\n    // Create a texture array (default 3x1)\n    let textureArray = [\n        config.layout.defaultPointColorInt[0],\n        config.layout.defaultPointColorInt[1],\n        config.layout.defaultPointColorInt[2],\n        255,\n        config.layout.secondPointColorInt[0],\n        config.layout.secondPointColorInt[1],\n        config.layout.secondPointColorInt[2],\n        255,\n        255,\n        255,\n        255,\n        0\n    ];\n    // [default color, second color, transparent, empty]\n    const texture = that.pointRegl.texture({\n        width: 3,\n        height: 1,\n        data: textureArray,\n        format: 'rgba'\n    });\n\n    // If user specifies an alpha level, we use it to override auto-alpha\n    let userAlpha = -1.0;\n    if (that.gridData && that.gridData.opacity !== undefined) {\n        userAlpha = Math.max(0, Math.min(that.gridData.opacity, 1));\n    }\n\n    const drawPoints = that.pointRegl({\n        depth: { enable: false },\n        stencil: { enable: false },\n        frag: fragmentShader,\n        vert: vertexShader,\n\n        attributes: {\n            position: {\n                buffer: that.frontPositionBuffer,\n                stride: 2 * 4,\n                offset: 0\n            },\n            textureCoord: {\n                buffer: that.frontTextureCoordinateBuffer,\n                stride: 2 * 4,\n                offset: 0\n            }\n        },\n        uniforms: {\n            // Placeholder for function parameters\n            pointWidth: 1.2,\n            dataScaleMatrix: that.webGLMatrices.dataScaleMatrix,\n            zoomMatrix: zoomMatrix,\n            normalizeMatrix: that.webGLMatrices.normalizeMatrix,\n            alpha: alpha,\n            userAlpha: userAlpha,\n            texture: texture\n        },\n        blend: {\n            enable: true,\n            func: {\n                srcRGB: 'one',\n                srcAlpha: 'one',\n                dstRGB: 'one minus src alpha',\n                dstAlpha: 'one minus src alpha'\n            }\n        },\n\n        count: that.frontBufferPointSize,\n        primitive: 'points'\n    });\n\n    drawPoints();\n}\n\nexport function drawGroupContour(that, group) {\n\n    if (that.gridData == null || that.gridData.groupGrids == undefined) {\n        console.error('Grid data not initialized');\n        return null;\n    }\n\n    const contourGroup = that.svg.select(`.contour-group-${group}`);\n\n    const gridData1D = [];\n    const grid = that.gridData.groupGrids[group];\n    for (const row of grid) {\n        for (const item of row) {\n            gridData1D.push(item);\n        }\n    }\n\n    // Linear interpolate the levels to determine the thresholds\n    const levels = config.layout.contourLevels;\n    const thresholds = [];\n    const minValue = Math.min(...gridData1D);\n    const maxValue = Math.max(...gridData1D);\n    const step = (maxValue - minValue) / levels;\n    for (let i = 0; i < levels; i++) {\n        thresholds.push(minValue + step * i);\n    }\n\n    let contours = d3\n        .contours()\n        .thresholds(thresholds)\n        .size([grid.length, grid[0].length])(gridData1D);\n\n    // Convert the scale of the generated paths\n    const contourXScale = d3\n        .scaleLinear()\n        .domain([0, grid.length])\n        .range(that.gridData.xRange);\n\n    const contourYScale = d3\n        .scaleLinear()\n        .domain([0, grid[0].length])\n        .range(that.gridData.yRange);\n\n    contours = contours.map(item => {\n        item.coordinates = item.coordinates.map(coordinates => {\n            return coordinates.map(positions => {\n                return positions.map(point => {\n                    return [\n                        that.xScale(contourXScale(point[0])),\n                        // that.xScale(contourXScale(point[0])) + (that.svgFullSize.width - that.svgFullSize.height) / 2,\n                        that.yScale(contourYScale(point[1]))\n                    ];\n                });\n            });\n        });\n        return item;\n    });\n\n    // Create a new color interpolator\n    // (starting from white here)\n    const colorScaleInterpolator = d3.interpolateLab(\n        '#ffffff',\n        config.layout['groupColors'][that.groupNames?.indexOf(group) || 0]\n    );\n    const colorScale = d3.scaleSequential(\n        d3.extent(thresholds),\n        d => colorScaleInterpolator(d / 1)\n    );\n\n    // Draw the contours\n    contourGroup\n        .selectAll('path')\n        .data(contours.slice(1))\n        .join('path')\n        .attr('fill', d => colorScale(d.value))\n        .attr('d', d3.geoPath());\n\n    return contours;\n};\n\n/**\n * Convert the current zoom transform into a matrix\n * @param zoomTransform D3 zoom transform\n * @returns 1D matrix\n */\nconst getZoomMatrix = (zoomTransform) => {\n    // Transforming the stage space based on the current zoom transform\n    const zoomMatrix = [\n        [zoomTransform.k, 0, zoomTransform.x],\n        [0, zoomTransform.k, zoomTransform.y],\n        [0, 0, 1]\n    ];\n    const zoomMatrix1D = zoomMatrix.flat();\n    return zoomMatrix1D;\n};\n\nexport function updateWebGLBuffers(that, newPoints) {\n    // Get the position and color of each new point\n    const positions = [];\n    const textureCoords = [];\n\n    for (const point of newPoints) {\n        positions.push([point.x, point.y]);\n\n        if (that.timeTextureMap === null) {\n            if (that.groupNames && point.groupID !== undefined) {\n                textureCoords.push([point.groupID / that.groupNames.length, 0]);\n            } else {\n                textureCoords.push([0, 0]);\n            }\n        } else {\n            if (that.timeTextureMap.has(point.time)) {\n                const u =\n                    that.timeTextureMap.get(point.time) /\n                    (that.timeTextureMap.size - 1);\n                textureCoords.push([u, 0.5]);\n            } else {\n                // The last entry in the texture array is reserved for 'bad' points\n                // (e.g., wrong year)\n                textureCoords.push([1, 0]);\n            }\n        }\n    }\n\n    // Update the buffer using byte offsets\n    that.frontPositionBuffer.subdata(\n        positions,\n        that.frontBufferPointSize * 2 * 4\n    );\n    that.frontTextureCoordinateBuffer.subdata(\n        textureCoords,\n        that.frontBufferPointSize * 2 * 4\n    );\n    that.frontBufferPointSize += newPoints.length;\n}\n\nexport function highlightPoint(that, args) {\n    const offx = 0;\n    const { point, animated } = args;\n    if (!anyTrue(that.showPoints)) return;\n    if (point === that.hoverPoint) return;\n    if (that.hideHighlights) return;\n\n    // Draw the point on the top svg\n    const group = that.topSvg.select('g.top-content g.highlights');\n    const oldHighlightPoint = group.select('circle.highlight-point');\n\n    // 整体向右进行偏移 \n\n    // Hovering empty space\n    if (point === undefined) {\n        if (pointMouseleaveTimer !== null) {\n            clearTimeout(pointMouseleaveTimer);\n            pointMouseleaveTimer = null;\n        }\n\n        if (pointMouseenterTimer !== null) {\n            clearTimeout(pointMouseenterTimer);\n            pointMouseenterTimer = null;\n        }\n\n        // Clear the highlight and tooltip in a short delay\n        pointMouseleaveTimer = setTimeout(() => {\n            that.hoverPoint = null;\n            that.tooltipTop.classList.add('hidden');\n            oldHighlightPoint.remove();\n            pointMouseleaveTimer = null;\n        }, 50);\n\n        return;\n    }\n\n    // Hovering over a point\n    that.hoverPoint = point;\n\n\n    // Change the point's text to an image tag if this is an image point\n    if (that.gridData && that.gridData.image !== undefined) {\n        if (that.gridData.image.imageGroup === that.hoverPoint.groupID) {\n            that.hoverPoint.prompt = `<img class=\"tooltip-image\" src=\"${that.gridData.image.imageURLPrefix + that.hoverPoint.prompt}\">`;\n        }\n    }\n\n\n\n    if (pointMouseleaveTimer !== null) {\n        clearTimeout(pointMouseleaveTimer);\n        pointMouseleaveTimer = null;\n    }\n\n    const highlightRadius = Math.max(\n        10 / that.curZoomTransform.k,\n        (that.curPointWidth * Math.exp(Math.log(that.curZoomTransform.k) * 0.55)) / that.curZoomTransform.k\n    );\n\n    const highlightStroke = 1.2 / that.curZoomTransform.k;\n    let curHighlightPoint; // 用于存储当前高亮点的选择器\n\n    // 如果没有高亮点\n    if (oldHighlightPoint.empty()) {\n        curHighlightPoint = group\n            .append('circle')\n            .attr('class', 'highlight-point')\n            .attr('cx', that.xScale(point.x) + offx)\n            .attr('cy', that.yScale(point.y))\n            .attr('r', highlightRadius)\n            .style('stroke-width', highlightStroke);\n    } else {\n        // 如果已有高亮点\n        curHighlightPoint = oldHighlightPoint;\n\n        if (animated) {\n            curHighlightPoint\n                .transition()\n                .duration(150)\n                .attr('cx', that.xScale(point.x) + offx)\n                .attr('cy', that.yScale(point.y))\n                .attr('r', highlightRadius)\n                .style('stroke-width', highlightStroke)\n                .on('end', () => {\n                    updatePopperTooltip(\n                        that.tooltipTop,\n                        curHighlightPoint.node(),\n                        point.prompt,\n                        'top'\n                    );\n                });\n        } else {\n            curHighlightPoint\n                .attr('cx', that.xScale(point.x) + offx)\n                .attr('cy', that.yScale(point.y))\n                .attr('r', highlightRadius)\n                .style('stroke-width', highlightStroke);\n\n            updatePopperTooltip(\n                that.tooltipTop,\n                curHighlightPoint.node(),\n                point.prompt,\n                'top'\n            );\n        }\n    }\n\n    if (pointMouseenterTimer !== null) {\n        clearTimeout(pointMouseenterTimer);\n    }\n\n    pointMouseenterTimer = setTimeout(() => {\n        that.tooltipTop.classList.remove('hidden');\n        pointMouseenterTimer = null;\n    }, 300);\n}\n\nexport function displayGroupChanged(that, group) {\n\n    console.log(\"数据....\",that.groupNames)\n\n    if (group !== undefined) {\n        // user have specified groups\n        if (that.groupNames) {\n            const groupIndex = that.groupNames.indexOf(group);\n\n            that.showContours[groupIndex] = true;\n\n            that.svg\n                .select(`g.contour-group-${group}`)\n                .classed('hidden', !that.showContours[groupIndex]);\n\n            // if (that.showLabel) {\n            //     that.layoutTopicLabels(that.userMaxLabelNum, true);\n            // }\n        } else {\n            that.showContours = new Array(that.showContours.length).fill(true);\n            const contourGroup = that.svg\n                .select('g.contour-group')\n                .style('opacity', null)\n                .classed('hidden', !that.showContours[0]);\n\n            that.svg\n                .select('g.contour-group-time')\n                .classed('hidden', !that.showContours[0]);\n\n        }\n    }\n\n    console.log(\"数据....\",that.showContours, that.showPoints)\n\n\n    if (group !== undefined) {\n        if (that.groupNames === null) {\n            throw Error('groupNames is null');\n        }\n\n        // Only show one group's point\n        const groupIndex = that.groupNames.indexOf(group);\n        that.showPoints[groupIndex] = true;\n    } else {\n        that.showPoints = new Array(that.showPoints.length).fill(\n            true\n        );\n    }\n\n    console.log(\"数据....\",that.showContours, that.showPoints)\n\n    that.pointCanvas\n        .classed('hidden', !anyTrue(that.showPoints))\n        .classed('faded', anyTrue(that.showPoints) && that.showLabel);\n\n    drawScatterPlot(that);\n\n    if (that.showGrid) Labeler.redrawTopicGrid(that, null);\n\n\n}\n\nexport const anyTrue = (items) => items.reduce((a, b) => a || b);\nexport const allTrue = (items) => items.reduce((a, b) => a && b);\n"],"mappings":"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","ignoreList":[]}]}