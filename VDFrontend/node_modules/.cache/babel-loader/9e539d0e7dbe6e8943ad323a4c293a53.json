{"remainingRequest":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js!/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/ResultView.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/ResultView.vue","mtime":1734619211228},{"path":"/home/yansha/VDProject/VDFrontend/babel.config.js","mtime":1730469387355},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js","mtime":1735202380921},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js","mtime":1735202381045}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5pdGVyYXRvci5mb3ItZWFjaC5qcyI7CmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaS9kYXRhIjsKaW1wb3J0IEJveCBmcm9tICJAL2NvbXBvbmVudHMvQm94LnZ1ZSI7CmltcG9ydCB7IGluZGV4IH0gZnJvbSAiZDMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlc3VsdFZpZXciLAogIGNvbXBvbmVudHM6IHsKICAgIEJveAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHF1ZXJ5SXRlbXM6IFtdLAogICAgICByZXRyaWV2YWxJdGVtczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRRdWVyeUl0ZW1zKCkgewogICAgICAvLyDlhYjmnaXmnoTlu7rnrKzkuIDkuKogcXVlcnkg55qE57uT5p6cCiAgICAgIGxldCByZXMgPSBhd2FpdCBhcGkuZ2V0UXVlcnlJbmZvKHsKICAgICAgICAicmV0cmlldmFsU2V0IjogdGhpcy4kc3RvcmUuc3RhdGUucmV0cmlldmFsU2V0CiAgICAgIH0pOwogICAgICBsZXQgaW1hZ2VVcmwgPSByZXNbJ2RhdGEnXVsnaW1hZ2VVcmwnXTsKICAgICAgbGV0IGltYWdlUGF0aCA9IHJlc1snZGF0YSddWydpbWFnZVBhdGgnXTsKICAgICAgbGV0IHRpdGxlID0gYFExXyR7dGhpcy4kc3RvcmUuc3RhdGUuZGF0YXNldE5hbWV9XyR7dGhpcy4kc3RvcmUuc3RhdGUubW9kZWxOYW1lfWA7CiAgICAgIGxldCBpY29uQ2xhc3MgPSAiZWwtaWNvbi1pbmZvIjsKICAgICAgbGV0IHR5cGUgPSAncXVlcnknOwogICAgICBsZXQgY29udGVudHMgPSB7CiAgICAgICAgaW1hZ2VVcmw6IGltYWdlVXJsLAogICAgICAgIGltYWdlUGF0aDogaW1hZ2VQYXRoCiAgICAgIH07CiAgICAgIHRoaXMucXVlcnlJdGVtcy5wdXNoKHsKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgaWNvbkNsYXNzOiBpY29uQ2xhc3MsCiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBjb250ZW50czogY29udGVudHMKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoewogICAgICByZXRyaWV2YWxTZXQ6ICJyZXRyaWV2YWxTZXQiLAogICAgICBkYXRhc2V0TmFtZTogImRhdGFzZXROYW1lIiwKICAgICAgbW9kZWxOYW1lOiAibW9kZWxOYW1lIiwKICAgICAgcmV0cmlldmFsSW5mbzogInJldHJpZXZhbEluZm8iLAogICAgICBzZWxlY3RlZE5vZGU6ICJzZWxlY3RlZE5vZGUiCiAgICB9KSwKICAgIGdldEl0ZW1zKCkgewogICAgICBjb25zdCBkYXRhc2V0TmFtZSA9IHRoaXMucmV0cmlldmFsU2V0WydkYXRhc2V0TmFtZSddOwogICAgICBjb25zdCBtb2RlbE5hbWUgPSB0aGlzLnJldHJpZXZhbFNldFsnbW9kZWxOYW1lJ107CiAgICAgIGNvbnN0IGluZGV4VHlwZSA9IHRoaXMucmV0cmlldmFsU2V0WydpbmRleFR5cGUnXTsKICAgICAgY29uc3QgbWV0cmljID0gdGhpcy5yZXRyaWV2YWxTZXRbJ21ldHJpYyddOwogICAgICBjb25zdCB0b3BLID0gdGhpcy5yZXRyaWV2YWxTZXRbJ3RvcEsnXTsKICAgICAgbGV0IHRpdGxlID0gYFExXyR7ZGF0YXNldE5hbWV9XyR7bW9kZWxOYW1lfV8ke2luZGV4VHlwZX1fJHttZXRyaWN9X1RvcCR7dG9wS31gOwogICAgICBsZXQgaWNvbkNsYXNzID0gImVsLWljb24taW5mbyI7CiAgICAgIHJldHVybiBbewogICAgICAgICJ0aXRsZSI6IHRpdGxlLAogICAgICAgICJpY29uQ2xhc3MiOiBpY29uQ2xhc3MKICAgICAgfV07CiAgICB9LAogICAgZ2V0UmV0cmlldmFsSXRlbXMoKSB7CiAgICAgIC8vIOWFiOadpeaehOW7uuesrOS4gOS4qiBxdWVyeSDnmoTmo4DntKLnmoTnu5PmnpwKCiAgICAgIHRoaXMucmV0cmlldmFsSW5mby5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgIGxldCB0aXRsZSA9IGBRMV8ke3RoaXMuJHN0b3JlLnN0YXRlLmRhdGFzZXROYW1lfV8ke3RoaXMuJHN0b3JlLnN0YXRlLm1vZGVsTmFtZX1gOwogICAgICAgIGxldCBpY29uQ2xhc3MgPSAiZWwtaWNvbi1pbmZvIjsKICAgICAgICBsZXQgdHlwZSA9ICdyZXRyaWV2YWwnOwogICAgICAgIGxldCBpbWFnZVVybCA9IGl0ZW1bJ2ltYWdlVXJsJ107CiAgICAgICAgbGV0IGltYWdlUGF0aCA9IGl0ZW1bJ2ltYWdlUGF0aCddOwogICAgICAgIGxldCBub2RlTGlzdCA9IGl0ZW1bJ25vZGVJRExpc3QnXTsKICAgICAgICBsZXQgdG9wSyA9IGluZGV4ICsgMTsKICAgICAgICBsZXQgY29udGVudHMgPSB7CiAgICAgICAgICAiaW1hZ2VVcmwiOiBpbWFnZVVybCwKICAgICAgICAgICJpbWFnZVBhdGgiOiBpbWFnZVBhdGgKICAgICAgICB9OwogICAgICAgIGxldCBpc0hpZ2hsaWdodGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy5yZXRyaWV2YWxJdGVtcy5wdXNoKHsKICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgIGljb25DbGFzczogaWNvbkNsYXNzLAogICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgIHRvcEs6IHRvcEssCiAgICAgICAgICBjb250ZW50czogY29udGVudHMsCiAgICAgICAgICBub2RlTGlzdDogbm9kZUxpc3QsCiAgICAgICAgICBpc0hpZ2hsaWdodGVkOiBpc0hpZ2hsaWdodGVkIC8vIOmrmOS6ruagh+W/lwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMucmV0cmlldmFsSXRlbXM7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgcmV0cmlldmFsU2V0KG5ld1ZhbCkgewogICAgICBjb25zb2xlLmxvZygicXVlcnlpbmZvIiwgbmV3VmFsKTsKICAgICAgdGhpcy5nZXRRdWVyeUl0ZW1zKCk7CiAgICAgIC8vIHRoaXMuZ2V0UmV0cmlldmFsSXRlbXMoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["d3","mapState","api","Box","index","name","components","data","queryItems","retrievalItems","methods","getQueryItems","res","getQueryInfo","$store","state","retrievalSet","imageUrl","imagePath","title","datasetName","modelName","iconClass","type","contents","push","computed","retrievalInfo","selectedNode","getItems","indexType","metric","topK","getRetrievalItems","forEach","item","nodeList","isHighlighted","watch","newVal","console","log"],"sources":["src/views/MainView/RightMainView/ResultView.vue"],"sourcesContent":["<template>\n    <div v-if=\"this.$store.state.retrievalSet['topK']\" class=\"result-main\">\n\n        <el-collapse accordion>\n            <el-collapse-item v-for=\"(item, index) in getItems\" :key=\"index\">\n                <template slot=\"title\">\n                    {{ item.title }}\n                    <!-- <i :class=\"`header-icon ${item.iconClass}`\"></i> -->\n                </template>\n                <div class=\"query-main\">\n                    <div class=\"res-text\">query info</div>\n                    <Box v-if=\"queryItems.length > 0\" :items=\"queryItems\" />\n\n                </div>\n                <div class=\"retrieval-main\">\n                    <div class=\"res-text\">retrieval info</div>\n                    <Box v-if=\"getRetrievalItems.length > 0\" :items=\"getRetrievalItems\" />\n\n                </div>\n                <!-- <div class=\"gt-main\">\n                    <div class=\"res-text\">gt info</div>\n                    <Box :items=\"getSubItems\" />\n                </div> -->\n\n\n            </el-collapse-item>\n        </el-collapse>\n\n    </div>\n\n</template>\n\n\n<script>\nimport * as d3 from \"d3\";\nimport { mapState } from \"vuex\";\nimport api from \"@/api/data\";\nimport Box from \"@/components/Box.vue\";\nimport { index } from \"d3\";\n\n\nexport default {\n    name: \"ResultView\",\n    components: {\n        Box\n\n    },\n    data() {\n        return {\n            queryItems: [],\n            retrievalItems: [],\n\n        }\n    },\n    methods: {\n        async getQueryItems() {\n\n            // 先来构建第一个 query 的结果\n            let res = await api.getQueryInfo({ \"retrievalSet\": this.$store.state.retrievalSet });\n            let imageUrl = res['data']['imageUrl']\n            let imagePath = res['data']['imagePath']\n            let title = `Q1_${this.$store.state.datasetName}_${this.$store.state.modelName}`;\n            let iconClass = \"el-icon-info\";\n            let type = 'query';\n            let contents = { imageUrl: imageUrl, imagePath: imagePath };\n\n            this.queryItems.push({\n                title: title,\n                iconClass: iconClass,\n                type: type,\n                contents: contents\n            });\n        },\n    },\n    computed: {\n        ...mapState({\n            retrievalSet: \"retrievalSet\",\n            datasetName: \"datasetName\",\n            modelName: \"modelName\",\n            retrievalInfo: \"retrievalInfo\",\n            selectedNode: \"selectedNode\"\n        }),\n        getItems() {\n\n            const datasetName = this.retrievalSet['datasetName'];\n            const modelName = this.retrievalSet['modelName'];\n            const indexType = this.retrievalSet['indexType'];\n            const metric = this.retrievalSet['metric'];\n            const topK = this.retrievalSet['topK'];\n\n            let title = `Q1_${datasetName}_${modelName}_${indexType}_${metric}_Top${topK}`;\n            let iconClass = \"el-icon-info\";\n\n            return [{ \"title\": title, \"iconClass\": iconClass }];\n        },\n        getRetrievalItems() {\n\n            // 先来构建第一个 query 的检索的结果\n\n            this.retrievalInfo.forEach((item, index) => {\n\n                let title = `Q1_${this.$store.state.datasetName}_${this.$store.state.modelName}`;\n                let iconClass = \"el-icon-info\";\n                let type = 'retrieval';\n                let imageUrl = item['imageUrl']\n                let imagePath = item['imagePath'];\n                let nodeList = item['nodeIDList']\n                let topK = index + 1;\n                let contents = { \"imageUrl\": imageUrl, \"imagePath\": imagePath };\n                let isHighlighted = false;\n\n                this.retrievalItems.push({\n                    title: title,\n                    iconClass: iconClass,\n                    type: type,\n                    topK: topK,\n                    contents: contents,\n                    nodeList: nodeList,\n                    isHighlighted: isHighlighted  // 高亮标志\n                });\n\n            });\n            return this.retrievalItems;\n        },\n\n    },\n\n    watch: {\n        retrievalSet(newVal) {\n            console.log(\"queryinfo\", newVal);\n            this.getQueryItems();\n            // this.getRetrievalItems();\n\n        }\n\n\n    },\n\n};\n</script>\n\n<style scoped>\n.result-main {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.res-text {\n    font-size: 15px;\n}\n\n\n.result-main::v-deep .el-collapse-item__header {\n    font-size: 16px;\n\n}\n</style>"],"mappings":";;;AAkCA,YAAAA,EAAA;AACA,SAAAC,QAAA;AACA,OAAAC,GAAA;AACA,OAAAC,GAAA;AACA,SAAAC,KAAA;AAGA;EACAC,IAAA;EACAC,UAAA;IACAH;EAEA;EACAI,KAAA;IACA;MACAC,UAAA;MACAC,cAAA;IAEA;EACA;EACAC,OAAA;IACA,MAAAC,cAAA;MAEA;MACA,IAAAC,GAAA,SAAAV,GAAA,CAAAW,YAAA;QAAA,qBAAAC,MAAA,CAAAC,KAAA,CAAAC;MAAA;MACA,IAAAC,QAAA,GAAAL,GAAA;MACA,IAAAM,SAAA,GAAAN,GAAA;MACA,IAAAO,KAAA,cAAAL,MAAA,CAAAC,KAAA,CAAAK,WAAA,SAAAN,MAAA,CAAAC,KAAA,CAAAM,SAAA;MACA,IAAAC,SAAA;MACA,IAAAC,IAAA;MACA,IAAAC,QAAA;QAAAP,QAAA,EAAAA,QAAA;QAAAC,SAAA,EAAAA;MAAA;MAEA,KAAAV,UAAA,CAAAiB,IAAA;QACAN,KAAA,EAAAA,KAAA;QACAG,SAAA,EAAAA,SAAA;QACAC,IAAA,EAAAA,IAAA;QACAC,QAAA,EAAAA;MACA;IACA;EACA;EACAE,QAAA;IACA,GAAAzB,QAAA;MACAe,YAAA;MACAI,WAAA;MACAC,SAAA;MACAM,aAAA;MACAC,YAAA;IACA;IACAC,SAAA;MAEA,MAAAT,WAAA,QAAAJ,YAAA;MACA,MAAAK,SAAA,QAAAL,YAAA;MACA,MAAAc,SAAA,QAAAd,YAAA;MACA,MAAAe,MAAA,QAAAf,YAAA;MACA,MAAAgB,IAAA,QAAAhB,YAAA;MAEA,IAAAG,KAAA,SAAAC,WAAA,IAAAC,SAAA,IAAAS,SAAA,IAAAC,MAAA,OAAAC,IAAA;MACA,IAAAV,SAAA;MAEA;QAAA,SAAAH,KAAA;QAAA,aAAAG;MAAA;IACA;IACAW,kBAAA;MAEA;;MAEA,KAAAN,aAAA,CAAAO,OAAA,EAAAC,IAAA,EAAA/B,KAAA;QAEA,IAAAe,KAAA,cAAAL,MAAA,CAAAC,KAAA,CAAAK,WAAA,SAAAN,MAAA,CAAAC,KAAA,CAAAM,SAAA;QACA,IAAAC,SAAA;QACA,IAAAC,IAAA;QACA,IAAAN,QAAA,GAAAkB,IAAA;QACA,IAAAjB,SAAA,GAAAiB,IAAA;QACA,IAAAC,QAAA,GAAAD,IAAA;QACA,IAAAH,IAAA,GAAA5B,KAAA;QACA,IAAAoB,QAAA;UAAA,YAAAP,QAAA;UAAA,aAAAC;QAAA;QACA,IAAAmB,aAAA;QAEA,KAAA5B,cAAA,CAAAgB,IAAA;UACAN,KAAA,EAAAA,KAAA;UACAG,SAAA,EAAAA,SAAA;UACAC,IAAA,EAAAA,IAAA;UACAS,IAAA,EAAAA,IAAA;UACAR,QAAA,EAAAA,QAAA;UACAY,QAAA,EAAAA,QAAA;UACAC,aAAA,EAAAA,aAAA;QACA;MAEA;MACA,YAAA5B,cAAA;IACA;EAEA;EAEA6B,KAAA;IACAtB,aAAAuB,MAAA;MACAC,OAAA,CAAAC,GAAA,cAAAF,MAAA;MACA,KAAA5B,aAAA;MACA;IAEA;EAGA;AAEA","ignoreList":[]}]}