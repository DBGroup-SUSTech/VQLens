{"remainingRequest":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js!/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js??ref--17!/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/NodeLinkView.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/NodeLinkView.vue","mtime":1744442733412},{"path":"/home/yansha/VDProject/VDFrontend/babel.config.js","mtime":1744442733384},{"path":"/home/yansha/VDProject/VDFrontend/babel.config.js","mtime":1744442733384},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js","mtime":1735202380921},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js","mtime":1735202380921},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js","mtime":1735202381045}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLnNvbWUuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS95YW5zaGEvVkRQcm9qZWN0L1ZERnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3Iuc29tZS5qcyI7CmltcG9ydCBkMyBmcm9tICIuLi8uLi8uLi91dGlscy9kMy1pbXBvcnQiOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgYXBpIGZyb20gIkAvYXBpL2RhdGEiOwppbXBvcnQgeyBOb2RlR3JhcGggfSBmcm9tICIuLi8uLi8uLi9jb21wb25lbnRzL0dyYXBoL05vZGVHcmFwaCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTm9kZUxpbmtWaWV3IiwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbm9kZWxpbmtkYXRhOiB7fSwKICAgICAgd2lkdGg6ICIiLAogICAgICBoZWlnaHQ6ICIiLAogICAgICBub2RlR3JhcGg6IG51bGwKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbml0Tm9kZUdyYXBoKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0Tm9kZUdyYXBoOiBmdW5jdGlvbiBpbml0Tm9kZUdyYXBoKCkgewogICAgICB2YXIgZGFnID0gdGhpcy4kcmVmcy5ub2RlTGlua0dyYXBoOwogICAgICB0aGlzLndpZHRoID0gZGFnLmNsaWVudFdpZHRoICogMjsKICAgICAgdGhpcy5oZWlnaHQgPSBkYWcuY2xpZW50SGVpZ2h0ICogMjsKICAgICAgdmFyIGdyYXBoQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vZGUtZ3JhcGgtY29udGFpbmVyJyk7CiAgICAgIHRoaXMubm9kZUdyYXBoID0gbmV3IE5vZGVHcmFwaCh7CiAgICAgICAgY29tcG9uZW50OiBncmFwaENvbnRhaW5lciwKICAgICAgICBkYXRhOiB0aGlzLiRzdG9yZS5zdGF0ZS5kYXRhTm9kZUxpbmssCiAgICAgICAgc3RyZW5ndGhzOiB7CiAgICAgICAgICBsaW5rU3RyZW5ndGg6IDEsCiAgICAgICAgICAvLyDorr7nva7pgILlvZPnmoTpk77mjqXlvLrluqYKICAgICAgICAgIGxpbmtEaXN0YW5jZTogOCwKICAgICAgICAgIC8vIOiuvue9rumAguW9k+eahOmTvuaOpei3neemuwogICAgICAgICAgbm9kZVN0cmVuZ3RoOiAtNSwKICAgICAgICAgIC8vIOiuvue9rumAguW9k+eahOiKgueCueW8uuW6pgogICAgICAgICAgY29sbGlkZVN0cmVuZ3RoOiA1IC8vIOiuvue9rumAguW9k+eahOeisOaSnuW8uuW6pgogICAgICAgIH0sCiAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsCiAgICAgICAgLy8g6K6+572u5Zu+5b2i5a695bqmCiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCwKICAgICAgICAvLyDorr7nva7lm77lvaLpq5jluqYKICAgICAgICBub2RlUmFkaXVzOiA2LAogICAgICAgIC8vIOiuvue9ruiKgueCueWNiuW+hAogICAgICAgIG1pbkxpbmtTdHJva2VXaWR0aDogMSwKICAgICAgICAvLyDorr7nva7mnIDlsI/pk77mjqXlrr3luqYgCiAgICAgICAgbWF4TGlua1N0cm9rZVdpZHRoOiAzLAogICAgICAgIC8vIOiuvue9ruacgOWkp+mTvuaOpeWuveW6pgogICAgICAgIHNlbGVjdGVkTm9kZTogdGhpcy4kc3RvcmUuc3RhdGUuc2VsZWN0ZWROb2RlCiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZVNlbGVjdGVkTm9kZTogZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWROb2RlKHNlbGVjdGVkTm9kZSkgewogICAgICBpZiAodGhpcy5ub2RlR3JhcGgpIHsKICAgICAgICBjb25zb2xlLmxvZygiU2VsZWN0ZWQgTm9kZToiLCBzZWxlY3RlZE5vZGUsIHRoaXMubm9kZUdyYXBoLm5vZGVFbGVtZW50cyk7CgogICAgICAgIC8vIOajgOafpeiKgueCueaYr+WQpuWtmOWcqAogICAgICAgIHZhciBub2RlRGF0YSA9IHRoaXMubm9kZUdyYXBoLm5vZGVFbGVtZW50cy5kYXRhKCk7CiAgICAgICAgdmFyIGV4aXN0cyA9IG5vZGVEYXRhLnNvbWUoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiBkLmlkID09IHNlbGVjdGVkTm9kZTsKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygi6K+l54K55a2Y5Zyo77yB77yB77yB77yB77yB77yB77yB77yB77yB77yB77yBIiwgZXhpc3RzKTsKICAgICAgICBpZiAoZXhpc3RzKSB7CiAgICAgICAgICAvLyDlj6rmnInlnKjoioLngrnlrZjlnKjml7bmiY3orr7nva7moLflvI8KICAgICAgICAgIHRoaXMubm9kZUdyYXBoLm5vZGVFbGVtZW50cy5zdHlsZSgnc3Ryb2tlJywgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIGQuaWQgPT0gc2VsZWN0ZWROb2RlID8gJ3llbGxvdycgOiAnd2hpdGUnOwogICAgICAgICAgfSkuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIHJldHVybiBkLmlkID09IHNlbGVjdGVkTm9kZSA/IDQgOiAxLjU7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coIk5vZGUgZG9lcyBub3QgZXhpc3Q6Iiwgc2VsZWN0ZWROb2RlKTsKICAgICAgICAgIC8vIOWmguaenOiKgueCueS4jeWtmOWcqO+8jOmHjee9ruaJgOacieiKgueCueeahOagt+W8jwogICAgICAgICAgdGhpcy5ub2RlR3JhcGgubm9kZUVsZW1lbnRzLnN0eWxlKCdzdHJva2UnLCAnd2hpdGUnKSAvLyDmiYDmnInoioLngrnnmoTovrnmoYbpopzoibIKICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgMS41KTsgLy8g5omA5pyJ6IqC54K555qE6L655qGG5a695bqmCiAgICAgICAgICBjb25zb2xlLmxvZygiTm9kZSBkb2VzIG5vdCBleGlzdDoiLCBzZWxlY3RlZE5vZGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKHsKICAgIGRhdGFOb2RlbGluazogImRhdGFOb2RlTGluayIsCiAgICByZXRyaWV2YWxTZXQ6ICJyZXRyaWV2YWxTZXQiLAogICAgZGF0YXNldE5hbWU6ICJkYXRhc2V0TmFtZSIsCiAgICBtb2RlbE5hbWU6ICJtb2RlbE5hbWUiLAogICAgcmV0cmlldmFsSW5mbzogInJldHJpZXZhbEluZm8iLAogICAgc2VsZWN0ZWROb2RlOiAic2VsZWN0ZWROb2RlIgogIH0pKSwKICB3YXRjaDogewogICAgc2VsZWN0ZWROb2RlOiBmdW5jdGlvbiBzZWxlY3RlZE5vZGUobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCAhPT0gb2xkVmFsICYgbmV3VmFsICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZE5vZGUobmV3VmFsKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["d3","mapState","api","NodeGraph","name","components","data","nodelinkdata","width","height","nodeGraph","mounted","initNodeGraph","methods","dag","$refs","nodeLinkGraph","clientWidth","clientHeight","graphContainer","document","getElementById","component","$store","state","dataNodeLink","strengths","linkStrength","linkDistance","nodeStrength","collideStrength","nodeRadius","minLinkStrokeWidth","maxLinkStrokeWidth","selectedNode","updateSelectedNode","console","log","nodeElements","nodeData","exists","some","d","id","style","computed","_objectSpread","dataNodelink","retrievalSet","datasetName","modelName","retrievalInfo","watch","newVal","oldVal"],"sources":["src/views/MainView/RightMainView/NodeLinkView.vue"],"sourcesContent":["<template>\n    <div id=\"node-graph-container\" class=\"node-link-main\" ref=\"nodeLinkGraph\">\n    </div>\n</template>\n\n<script>\nimport d3 from \"../../../utils/d3-import\";\nimport { mapState } from \"vuex\";\nimport api from \"@/api/data\";\nimport { NodeGraph } from \"../../../components/Graph/NodeGraph\";\n\nexport default {\n    name: \"NodeLinkView\",\n    components: {},\n    data() {\n        return {\n            nodelinkdata: {},\n            width: \"\",\n            height: \"\",\n            nodeGraph: null,\n\n        };\n    },\n    mounted() {\n        this.initNodeGraph();\n\n    },\n    methods: {\n        initNodeGraph() {\n\n            const dag = this.$refs.nodeLinkGraph;\n            this.width = dag.clientWidth * 2;\n            this.height = dag.clientHeight * 2;\n\n            const graphContainer = document.getElementById('node-graph-container');\n            this.nodeGraph = new NodeGraph({\n                component: graphContainer,\n                data: this.$store.state.dataNodeLink,\n                strengths: {\n                    linkStrength: 1,  // 设置适当的链接强度\n                    linkDistance: 8,   // 设置适当的链接距离\n                    nodeStrength: -5,  // 设置适当的节点强度\n                    collideStrength: 5   // 设置适当的碰撞强度\n\n                },\n                width: this.width,            // 设置图形宽度\n                height: this.height,          // 设置图形高度\n                nodeRadius: 6,       // 设置节点半径\n                minLinkStrokeWidth: 1, // 设置最小链接宽度 \n                maxLinkStrokeWidth: 3,  // 设置最大链接宽度\n                selectedNode: this.$store.state.selectedNode\n            })\n\n        },\n        updateSelectedNode(selectedNode) {\n            if (this.nodeGraph) {\n                console.log(\"Selected Node:\", selectedNode, this.nodeGraph.nodeElements);\n\n                // 检查节点是否存在\n                const nodeData = this.nodeGraph.nodeElements.data();\n                const exists = nodeData.some(d => d.id == selectedNode);\n                console.log(\"该点存在！！！！！！！！！！！\", exists);\n                if (exists) {\n\n                    // 只有在节点存在时才设置样式\n                    this.nodeGraph.nodeElements\n                        .style('stroke', d => (d.id == selectedNode ? 'yellow' : 'white'))\n                        .style('stroke-width', d => (d.id == selectedNode ? 4 : 1.5));\n                } else {\n\n                    console.log(\"Node does not exist:\", selectedNode);\n                    // 如果节点不存在，重置所有节点的样式\n                    this.nodeGraph.nodeElements\n                        .style('stroke', 'white') // 所有节点的边框颜色\n                        .style('stroke-width', 1.5); // 所有节点的边框宽度\n                    console.log(\"Node does not exist:\", selectedNode);\n                }\n            }\n\n        }\n    },\n    computed: {\n        ...mapState({\n            dataNodelink: \"dataNodeLink\",\n            retrievalSet: \"retrievalSet\",\n            datasetName: \"datasetName\",\n            modelName: \"modelName\",\n            retrievalInfo: \"retrievalInfo\",\n            selectedNode: \"selectedNode\"\n        }),\n    },\n    watch: {\n        selectedNode(newVal, oldVal) {\n            if (newVal !== oldVal & newVal !== null) {\n                this.updateSelectedNode(newVal);\n            }\n\n\n\n        },\n    }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.node-link-main {\n    height: 100%;\n    width: 100%;\n    overflow: auto;\n    position: relative;\n\n    .dag-svg {\n        height: 100%;\n        width: 100%;\n    }\n\n    .thumbnail-svg {\n        position: absolute;\n        bottom: 20px;\n        left: 20px;\n        border: 1px solid #ccc;\n        background: #fff;\n    }\n}\n\n.option-box {\n    border: 1px solid #F7F7F7;\n    background-color: #F7F7F7;\n    padding: 5px;\n    position: absolute;\n    z-index: 1000;\n\n    div {\n        margin: 2px 0;\n        cursor: pointer;\n    }\n\n    div:hover {\n        background-color: #f0f0f0;\n    }\n}\n\n.option-button {\n    padding: 5px 10px;\n    border: 1px solid #000;\n    border-radius: 5px;\n    cursor: pointer;\n    background-color: #f0f0f0;\n    font-size: 14px;\n    font-family: Arial, sans-serif;\n    color: red;\n}\n\n.option-button:hover {\n    background-color: #e0e0e0;\n}\n</style>"],"mappings":";;;;;AAMA,OAAAA,EAAA;AACA,SAAAC,QAAA;AACA,OAAAC,GAAA;AACA,SAAAC,SAAA;AAEA;EACAC,IAAA;EACAC,UAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,YAAA;MACAC,KAAA;MACAC,MAAA;MACAC,SAAA;IAEA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,aAAA;EAEA;EACAC,OAAA;IACAD,aAAA,WAAAA,cAAA;MAEA,IAAAE,GAAA,QAAAC,KAAA,CAAAC,aAAA;MACA,KAAAR,KAAA,GAAAM,GAAA,CAAAG,WAAA;MACA,KAAAR,MAAA,GAAAK,GAAA,CAAAI,YAAA;MAEA,IAAAC,cAAA,GAAAC,QAAA,CAAAC,cAAA;MACA,KAAAX,SAAA,OAAAP,SAAA;QACAmB,SAAA,EAAAH,cAAA;QACAb,IAAA,OAAAiB,MAAA,CAAAC,KAAA,CAAAC,YAAA;QACAC,SAAA;UACAC,YAAA;UAAA;UACAC,YAAA;UAAA;UACAC,YAAA;UAAA;UACAC,eAAA;QAEA;QACAtB,KAAA,OAAAA,KAAA;QAAA;QACAC,MAAA,OAAAA,MAAA;QAAA;QACAsB,UAAA;QAAA;QACAC,kBAAA;QAAA;QACAC,kBAAA;QAAA;QACAC,YAAA,OAAAX,MAAA,CAAAC,KAAA,CAAAU;MACA;IAEA;IACAC,kBAAA,WAAAA,mBAAAD,YAAA;MACA,SAAAxB,SAAA;QACA0B,OAAA,CAAAC,GAAA,mBAAAH,YAAA,OAAAxB,SAAA,CAAA4B,YAAA;;QAEA;QACA,IAAAC,QAAA,QAAA7B,SAAA,CAAA4B,YAAA,CAAAhC,IAAA;QACA,IAAAkC,MAAA,GAAAD,QAAA,CAAAE,IAAA,WAAAC,CAAA;UAAA,OAAAA,CAAA,CAAAC,EAAA,IAAAT,YAAA;QAAA;QACAE,OAAA,CAAAC,GAAA,oBAAAG,MAAA;QACA,IAAAA,MAAA;UAEA;UACA,KAAA9B,SAAA,CAAA4B,YAAA,CACAM,KAAA,qBAAAF,CAAA;YAAA,OAAAA,CAAA,CAAAC,EAAA,IAAAT,YAAA;UAAA,GACAU,KAAA,2BAAAF,CAAA;YAAA,OAAAA,CAAA,CAAAC,EAAA,IAAAT,YAAA;UAAA;QACA;UAEAE,OAAA,CAAAC,GAAA,yBAAAH,YAAA;UACA;UACA,KAAAxB,SAAA,CAAA4B,YAAA,CACAM,KAAA;UAAA,CACAA,KAAA;UACAR,OAAA,CAAAC,GAAA,yBAAAH,YAAA;QACA;MACA;IAEA;EACA;EACAW,QAAA,EAAAC,aAAA,KACA7C,QAAA;IACA8C,YAAA;IACAC,YAAA;IACAC,WAAA;IACAC,SAAA;IACAC,aAAA;IACAjB,YAAA;EACA,GACA;EACAkB,KAAA;IACAlB,YAAA,WAAAA,aAAAmB,MAAA,EAAAC,MAAA;MACA,IAAAD,MAAA,KAAAC,MAAA,GAAAD,MAAA;QACA,KAAAlB,kBAAA,CAAAkB,MAAA;MACA;IAIA;EACA;AACA","ignoreList":[]}]}