{"remainingRequest":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/NodeLinkView.vue?vue&type=style&index=0&id=de5ea286&scoped=true&lang=scss","dependencies":[{"path":"/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/NodeLinkView.vue","mtime":1744442733412},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/css-loader/dist/cjs.js","mtime":1735202380733},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1735202381341},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":1735202380937},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/sass-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js","mtime":1735202381045}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ub2RlLWxpbmstbWFpbiB7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICB3aWR0aDogMTAwJTsKICAgIG92ZXJmbG93OiBhdXRvOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwoKICAgIC5kYWctc3ZnIHsKICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICB9CgogICAgLnRodW1ibmFpbC1zdmcgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICBib3R0b206IDIwcHg7CiAgICAgICAgbGVmdDogMjBweDsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOwogICAgICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICB9Cn0KCi5vcHRpb24tYm94IHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNGN0Y3Rjc7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjdGN0Y3OwogICAgcGFkZGluZzogNXB4OwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgei1pbmRleDogMTAwMDsKCiAgICBkaXYgewogICAgICAgIG1hcmdpbjogMnB4IDA7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgfQoKICAgIGRpdjpob3ZlciB7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsKICAgIH0KfQoKLm9wdGlvbi1idXR0b24gewogICAgcGFkZGluZzogNXB4IDEwcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwOwogICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsKICAgIGNvbG9yOiByZWQ7Cn0KCi5vcHRpb24tYnV0dG9uOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGUwZTA7Cn0K"},{"version":3,"sources":["NodeLinkView.vue"],"names":[],"mappings":";AAyGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"NodeLinkView.vue","sourceRoot":"src/views/MainView/RightMainView","sourcesContent":["<template>\n    <div id=\"node-graph-container\" class=\"node-link-main\" ref=\"nodeLinkGraph\">\n    </div>\n</template>\n\n<script>\nimport d3 from \"../../../utils/d3-import\";\nimport { mapState } from \"vuex\";\nimport api from \"@/api/data\";\nimport { NodeGraph } from \"../../../components/Graph/NodeGraph\";\n\nexport default {\n    name: \"NodeLinkView\",\n    components: {},\n    data() {\n        return {\n            nodelinkdata: {},\n            width: \"\",\n            height: \"\",\n            nodeGraph: null,\n\n        };\n    },\n    mounted() {\n        this.initNodeGraph();\n\n    },\n    methods: {\n        initNodeGraph() {\n\n            const dag = this.$refs.nodeLinkGraph;\n            this.width = dag.clientWidth * 2;\n            this.height = dag.clientHeight * 2;\n\n            const graphContainer = document.getElementById('node-graph-container');\n            this.nodeGraph = new NodeGraph({\n                component: graphContainer,\n                data: this.$store.state.dataNodeLink,\n                strengths: {\n                    linkStrength: 1,  // 设置适当的链接强度\n                    linkDistance: 8,   // 设置适当的链接距离\n                    nodeStrength: -5,  // 设置适当的节点强度\n                    collideStrength: 5   // 设置适当的碰撞强度\n\n                },\n                width: this.width,            // 设置图形宽度\n                height: this.height,          // 设置图形高度\n                nodeRadius: 6,       // 设置节点半径\n                minLinkStrokeWidth: 1, // 设置最小链接宽度 \n                maxLinkStrokeWidth: 3,  // 设置最大链接宽度\n                selectedNode: this.$store.state.selectedNode\n            })\n\n        },\n        updateSelectedNode(selectedNode) {\n            if (this.nodeGraph) {\n                console.log(\"Selected Node:\", selectedNode, this.nodeGraph.nodeElements);\n\n                // 检查节点是否存在\n                const nodeData = this.nodeGraph.nodeElements.data();\n                const exists = nodeData.some(d => d.id == selectedNode);\n                console.log(\"该点存在！！！！！！！！！！！\", exists);\n                if (exists) {\n\n                    // 只有在节点存在时才设置样式\n                    this.nodeGraph.nodeElements\n                        .style('stroke', d => (d.id == selectedNode ? 'yellow' : 'white'))\n                        .style('stroke-width', d => (d.id == selectedNode ? 4 : 1.5));\n                } else {\n\n                    console.log(\"Node does not exist:\", selectedNode);\n                    // 如果节点不存在，重置所有节点的样式\n                    this.nodeGraph.nodeElements\n                        .style('stroke', 'white') // 所有节点的边框颜色\n                        .style('stroke-width', 1.5); // 所有节点的边框宽度\n                    console.log(\"Node does not exist:\", selectedNode);\n                }\n            }\n\n        }\n    },\n    computed: {\n        ...mapState({\n            dataNodelink: \"dataNodeLink\",\n            retrievalSet: \"retrievalSet\",\n            datasetName: \"datasetName\",\n            modelName: \"modelName\",\n            retrievalInfo: \"retrievalInfo\",\n            selectedNode: \"selectedNode\"\n        }),\n    },\n    watch: {\n        selectedNode(newVal, oldVal) {\n            if (newVal !== oldVal & newVal !== null) {\n                this.updateSelectedNode(newVal);\n            }\n\n\n\n        },\n    }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.node-link-main {\n    height: 100%;\n    width: 100%;\n    overflow: auto;\n    position: relative;\n\n    .dag-svg {\n        height: 100%;\n        width: 100%;\n    }\n\n    .thumbnail-svg {\n        position: absolute;\n        bottom: 20px;\n        left: 20px;\n        border: 1px solid #ccc;\n        background: #fff;\n    }\n}\n\n.option-box {\n    border: 1px solid #F7F7F7;\n    background-color: #F7F7F7;\n    padding: 5px;\n    position: absolute;\n    z-index: 1000;\n\n    div {\n        margin: 2px 0;\n        cursor: pointer;\n    }\n\n    div:hover {\n        background-color: #f0f0f0;\n    }\n}\n\n.option-button {\n    padding: 5px 10px;\n    border: 1px solid #000;\n    border-radius: 5px;\n    cursor: pointer;\n    background-color: #f0f0f0;\n    font-size: 14px;\n    font-family: Arial, sans-serif;\n    color: red;\n}\n\n.option-button:hover {\n    background-color: #e0e0e0;\n}\n</style>"]}]}