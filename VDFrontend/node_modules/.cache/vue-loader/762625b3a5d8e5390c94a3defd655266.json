{"remainingRequest":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/TreeView.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/TreeView.vue","mtime":1744442733412},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js","mtime":1735202380921},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js","mtime":1735202380921},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js","mtime":1735202381045}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgKiBhcyBkMyBmcm9tICJkMyI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCBhcGkgZnJvbSAiQC9hcGkvZGF0YSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlRyZWVWaWV3IiwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdHJlZURhdGE6IHt9LAogICAgICBzdmdXaWR0aDogMCwKICAgICAgc3ZnSGVpZ2h0OiAwLAogICAgICB2ZWxvY2l0eURlY2F5OiAwLjYsCiAgICAgIHRodW1ibmFpbFRyZWVXaWR0aDogMCwgLy8g57yp55Wl5Zu+5a695bqmCiAgICAgIHRodW1ibmFpbFRyZWVIZWlnaHQ6IDAsIC8vIOe8qeeVpeWbvumrmOW6pgoKCgogICAgICBvbGRTZWxlY3RlZE5vZGU6ICctMScsCgogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFZpZXdTaXplKCk7CgogICAgdGhpcy50cmVlRGF0YSA9IHRoaXMuJHN0b3JlLnN0YXRlLmRhdGFUcmVlOwogICAgdGhpcy5pbml0R3JhcGgodGhpcy50cmVlRGF0YSk7CgogICAgLy8gdGhpcy5pbml0VGh1bWJuYWlsKCk7CgogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Vmlld1NpemUoKSB7CiAgICAgIGNvbnN0IHRyZWUgPSB0aGlzLiRyZWZzLnRyZWVNYWluOwogICAgICB0aGlzLnN2Z1dpZHRoID0gdHJlZS5jbGllbnRXaWR0aDsKICAgICAgdGhpcy5zdmdIZWlnaHQgPSB0cmVlLmNsaWVudEhlaWdodDsKCiAgICAgIHRoaXMudGh1bWJuYWlsVHJlZVdpZHRoID0gdGhpcy5zdmdXaWR0aCAvIDU7CiAgICAgIHRoaXMudGh1bWJuYWlsVHJlZUhlaWdodCA9IHRoaXMuc3ZnSGVpZ2h0IC8gNTsKICAgIH0sCiAgICB1cGRhdGVTZWxlY3RlZE5vZGUoc2VsZWN0ZWROb2RlKSB7CgogICAgICAvLyDkvb/nlKjpgInmi6nlmajmn6Xmib7oioLngrkKICAgICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50ID0gZDMuc2VsZWN0KGAjbm9kZXMtJHtzZWxlY3RlZE5vZGV9YCk7CgogICAgICAvLyDmo4Dmn6XlhYPntKDmmK/lkKblrZjlnKgKICAgICAgaWYgKCFzZWxlY3RlZEVsZW1lbnQuZW1wdHkoKSkgewogICAgICAgIGlmIChzZWxlY3RlZE5vZGUgPT09IHRoaXMub2xkU2VsZWN0ZWROb2RlKSB7CiAgICAgICAgICBzZWxlY3RlZEVsZW1lbnQKICAgICAgICAgICAgLmF0dHIoInIiLCAxMCkgLy8g6L655qGG5Y2K5b6ECiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UiLCAibm9uZSIpIC8vIOi+ueahhuminOiJsgogICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMyk7IC8vIOi+ueahhuWuveW6pgoKICAgICAgICAgIHRoaXMub2xkU2VsZWN0ZWROb2RlID0gJy0xJzsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbGVjdGVkRWxlbWVudAogICAgICAgICAgICAuYXR0cigiciIsIDQpIC8vIOi+ueahhuWNiuW+hAogICAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgInllbGxvdyIpIC8vIOi+ueahhuminOiJsgogICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgNCk7IC8vIOi+ueahhuWuveW6pgoKICAgICAgICAgIHRoaXMub2xkU2VsZWN0ZWROb2RlID0gc2VsZWN0ZWROb2RlOwoKICAgICAgICB9CgogICAgICB9IGVsc2UgaWYgKHRoaXMub2xkU2VsZWN0ZWROb2RlICE9PSAtMSkgewogICAgICAgIGQzLnNlbGVjdChgI25vZGVzLSR7dGhpcy5vbGRTZWxlY3RlZE5vZGV9YCkKICAgICAgICAgIC5hdHRyKCJyIiwgMTApIC8vIOi+ueahhuWNiuW+hAogICAgICAgICAgLmF0dHIoInN0cm9rZSIsICJub25lIikgLy8g6L655qGG6aKc6ImyCiAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMyk7IC8vIOi+ueahhuWuveW6pgoKICAgICAgICB0aGlzLm9sZFNlbGVjdGVkTm9kZSA9ICctMSc7CgogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKGDlhYPntKAgI25vZGVzLSR7c2VsZWN0ZWROb2RlfSDmnKrmib7liLBgKTsKICAgICAgfQoKCiAgICB9LAogICAgYXN5bmMgY29udmVydFRvSW1hZ2UoZXZlbnQsIG5vZGUpIHsKCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaS5nZXRJbWFnZVVybCh7ICJkYXRhc2V0TmFtZSI6IHRoaXMuJHN0b3JlLnN0YXRlLmRhdGFzZXROYW1lLCAibm9kZUlkIjogK25vZGUuZGF0YS5uYW1lIH0pOwogICAgICBjb25zdCBpbWFnZVVybCA9IHJlc1siZGF0YSJdWyJpbWFnZVVybCJdOwogICAgICBjb25zdCBwYXR0ZXJuSWQgPSBgcGF0dGVybi0keytub2RlLmRhdGEubmFtZX1gOwogICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZDMuc2VsZWN0KGV2ZW50LnRhcmdldCk7CgogICAgICBjb25zdCB0YXJnZXRCQm94ID0gdGFyZ2V0RWxlbWVudC5ub2RlKCkuZ2V0QkJveCgpOwogICAgICBjb25zdCB0YXJnZXRXaWR0aCA9IHRhcmdldEJCb3gud2lkdGg7CiAgICAgIGNvbnN0IHRhcmdldEhlaWdodCA9IHRhcmdldEJCb3guaGVpZ2h0OwoKICAgICAgbGV0IHBhdHRlcm4gPSBkMy5zZWxlY3QoYCMke3BhdHRlcm5JZH1gKTsKICAgICAgaWYgKHBhdHRlcm4uZW1wdHkoKSkgewogICAgICAgIC8vIOWmguaenCBwYXR0ZXJuIOS4jeWtmOWcqO+8jOWImeWIm+W7ugogICAgICAgIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdCh0aGlzLiRyZWZzLnRyZWUpOwoKICAgICAgICAvLyDnoa7kv50gZGVmcyDlrZjlnKgKICAgICAgICBsZXQgZGVmcyA9IHN2Zy5zZWxlY3QoImRlZnMiKTsKICAgICAgICBpZiAoZGVmcy5lbXB0eSgpKSB7CiAgICAgICAgICBkZWZzID0gc3ZnLmFwcGVuZCgiZGVmcyIpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcGF0dGVybiA9IGRlZnMuYXBwZW5kKCJwYXR0ZXJuIikKICAgICAgICAgIC5hdHRyKCJpZCIsIHBhdHRlcm5JZCkKICAgICAgICAgIC5hdHRyKCJwYXR0ZXJuVW5pdHMiLCAib2JqZWN0Qm91bmRpbmdCb3giKQogICAgICAgICAgLmF0dHIoIndpZHRoIiwgMSkgLy8g5a695bqm5Li6IDEg6KGo56S655u45a+55LqO55uu5qCH5YWD57Sg55qE5a695bqmCiAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgMSkgLy8g6auY5bqm5Li6IDEg6KGo56S655u45a+55LqO55uu5qCH5YWD57Sg55qE6auY5bqmCiAgICAgICAgICAuYXR0cigicGF0dGVyblRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMSwgMSkiKTsgLy8g5ZCR5Y+z5ZKM5ZCR5LiL56e75YqoIDEwIOS4quWNleS9jQoKICAgICAgICBjb25zdCBpbWFnZSA9IHBhdHRlcm4uYXBwZW5kKCJpbWFnZSIpCiAgICAgICAgICAuYXR0cigieGxpbms6aHJlZiIsIGltYWdlVXJsKQogICAgICAgICAgLmF0dHIoIndpZHRoIiwgNTgpCiAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgNTgpCiAgICAgICAgICAuYXR0cigicHJlc2VydmVBc3BlY3RSYXRpbyIsICJ4TWlkWU1pZCBzbGljZSIpOwogICAgICB9CgogICAgICAvLyDloavlhYXnm67moIflhYPntKAKICAgICAgdGFyZ2V0RWxlbWVudAogICAgICAgIC5hdHRyKCJyIiwgMzApCiAgICAgICAgLmF0dHIoImZpbGwiLCBgdXJsKCMke3BhdHRlcm5JZH0pYCkKICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiMwMDAiKSAvLyDorr7nva7ovrnmoYbpopzoibIKICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMik7IC8vIOiuvue9rui+ueahhuWuveW6pgogICAgfSwKICAgIGluaXRUaHVtYm5haWwoKSB7CiAgICAgIGNvbnN0IHRodW1ibmFpbCA9IGQzLnNlbGVjdCh0aGlzLiRyZWZzLnRodW1ibmFpbFRyZWUpOwogICAgICB0aHVtYm5haWwKICAgICAgICAuYXR0cigid2lkdGgiLCB0aGlzLnRodW1ibmFpbFRyZWVXaWR0aCkKICAgICAgICAuYXR0cigiaGVpZ2h0IiwgdGhpcy50aHVtYm5haWxUcmVlSGVpZ2h0KQogICAgICAgIC5hdHRyKCJ2aWV3Qm94IiwgYDAgMCAke3RoaXMudGh1bWJuYWlsVHJlZVdpZHRofSAke3RoaXMudGh1bWJuYWlsVHJlZUhlaWdodH1gKQogICAgICAgIC5hdHRyKCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwgInhNaWRZTWlkIG1lZXQiKQogICAgICAgIC5hdHRyKCJzdHlsZSIsICJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMTIwcHg7IHJpZ2h0OiA0MHB4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBiYWNrZ3JvdW5kOiAjZmZmOyIpOwogICAgfSwKICAgIHVwZGF0ZVRodW1ibmFpbCgpIHsKICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CiAgICAgIGNvbnN0IHRodW1ibmFpbCA9IGQzLnNlbGVjdCh0aGlzLiRyZWZzLnRodW1ibmFpbFRyZWUpOwogICAgICB0aHVtYm5haWwuc2VsZWN0QWxsKCIqIikucmVtb3ZlKCk7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRodW1ibmFpbC5hcHBlbmQoImciKQogICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgc2NhbGUoJHt0aGF0LnRodW1ibmFpbFRyZWVXaWR0aCAvIHRoYXQuc3ZnV2lkdGh9LCAke3RoYXQudGh1bWJuYWlsVHJlZUhlaWdodCAvIHRoYXQuc3ZnSGVpZ2h0fSkgdHJhbnNsYXRlKDAsICR7dGhhdC5zdmdIZWlnaHQgLyAyfSlgKTsKCiAgICAgIC8vIENsb25lIGxlZ2VuZCBhbmQgbGluayBub2RlcwogICAgICBjb25zdCBsZWdlbmROb2RlID0gZDMuc2VsZWN0KHRoYXQuJHJlZnMudHJlZSkuc2VsZWN0KGAubm9kZXNgKS5ub2RlKCkuY2xvbmVOb2RlKHRydWUpOwogICAgICBjb25zdCBsaW5rTm9kZSA9IGQzLnNlbGVjdCh0aGF0LiRyZWZzLnRyZWUpLnNlbGVjdChgI2xpbmtUcmVlYCkubm9kZSgpLmNsb25lTm9kZSh0cnVlKTsKCiAgICAgIGNvbnRhaW5lci5hcHBlbmQoKCkgPT4gbGVnZW5kTm9kZSk7CiAgICAgIGNvbnRhaW5lci5hcHBlbmQoKCkgPT4gbGlua05vZGUpOwoKICAgIH0sCiAgICBpbml0R3JhcGgoZGF0YU9iaikgewogICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgY29uc3Qgd2lkdGggPSB0aGF0LnN2Z1dpZHRoOwogICAgICAvLyBwYXJzZSBkYXRhCiAgICAgIGNvbnN0IHJlY2FsbCA9IGRhdGFPYmpbIm1ldHJpYyJdWydyZWNhbGwnXTsKICAgICAgY29uc3QgZGF0YSA9IGRhdGFPYmoudHJlZURhdGFbIjAiXTsKICAgICAgY29uc3Qgcm9vdCA9IGQzLmhpZXJhcmNoeShkYXRhKTsKCiAgICAgIGNvbnN0IGR4ID0gMzA7CiAgICAgIGNvbnN0IGR5ID0gd2lkdGggLyAocm9vdC5oZWlnaHQgKyAxKTsKCiAgICAgIGNvbnN0IHRyZWUgPSBkMy50cmVlKCkubm9kZVNpemUoW2R4LCBkeV0pOwoKICAgICAgcm9vdC5zb3J0KChhLCBiKSA9PiBkMy5hc2NlbmRpbmcoYS5kYXRhLm5hbWUsIGIuZGF0YS5uYW1lKSk7CiAgICAgIHRyZWUocm9vdCk7CgogICAgICBsZXQgeDAgPSBJbmZpbml0eTsKICAgICAgbGV0IHgxID0gLXgwOwogICAgICByb290LmVhY2goZCA9PiB7CiAgICAgICAgaWYgKGQueCA+IHgxKSB4MSA9IGQueDsKICAgICAgICBpZiAoZC54IDwgeDApIHgwID0gZC54OwogICAgICB9KTsKCiAgICAgIC8vIOaJk+WNsOe7k+aenAogICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLm1heCh4MSAtIHgwICsgZHggKiAyLCB0aGF0LnN2Z0hlaWdodCk7CgogICAgICBkMy5zZWxlY3QodGhpcy4kcmVmc1sidHJlZSJdKS5zZWxlY3RBbGwoIioiKS5yZW1vdmUoKTsKCiAgICAgIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdCh0aGlzLiRyZWZzWyJ0cmVlIl0pCiAgICAgICAgLmF0dHIoInZpZXdCb3giLCBbLWR5IC8gMiwgeDAgLSBkeCwgd2lkdGgsIGhlaWdodF0pCiAgICAgICAgLmF0dHIoIndpZHRoIiwgd2lkdGgpCiAgICAgICAgLmF0dHIoImhlaWdodCIsIGhlaWdodCkKICAgICAgICAuYXR0cigic3R5bGUiLCAibWF4LXdpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IGZvbnQ6IDEwcHggc2Fucy1zZXJpZjsiKQogICAgICAgIC5jYWxsKGQzLnpvb20oKS5vbigiem9vbSIsIChldmVudCkgPT4gewogICAgICAgICAgY29udGFpbmVyLmF0dHIoInRyYW5zZm9ybSIsIGV2ZW50LnRyYW5zZm9ybSk7CiAgICAgICAgfSkpOwoKICAgICAgY29uc3QgY29udGFpbmVyID0gc3ZnCiAgICAgICAgLmFwcGVuZCgiZyIpCiAgICAgICAgLmF0dHIoImNsYXNzIiwgImNvbnRhaW5lciIpOwogICAgICAvLyAuYXR0cigidHJhbnNmb3JtIiwgYHRyYW5zbGF0ZSgwLCAke2R4fSlgKTsKICAgICAgY29uc3Qgb2ZmaGVpZ2h0ID0gLWR5IC8gMzsKICAgICAgY29uc3Qgb2Zmd2lkdGggPSB4MCArIGR4IC8gMyAqIDI7CiAgICAgIHN2Zy5hcHBlbmQoInRleHQiKQogICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7b2ZmaGVpZ2h0fSwgJHtvZmZ3aWR0aH0pYCkKICAgICAgICAuYXR0cigiZm9udC1mYW1pbHkiLCAic2Fucy1zZXJpZiIpCiAgICAgICAgLmF0dHIoImZvbnQtc2l6ZSIsIDE1KQogICAgICAgIC50ZXh0KGBSZWNhbGw6ICR7cmVjYWxsfWApOwoKICAgICAgY29uc3QgbGluayA9IGNvbnRhaW5lci5hcHBlbmQoImciKQogICAgICAgIC5hdHRyKCJjbGFzcyIsICJsaW5rcyIpCiAgICAgICAgLmF0dHIoImlkIiwgYGxpbmtUcmVlYCkKICAgICAgICAuYXR0cigiZmlsbCIsICJub25lIikKICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiM1NTUiKQogICAgICAgIC5hdHRyKCJzdHJva2Utb3BhY2l0eSIsIDAuNCkKICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMS41KQogICAgICAgIC5zZWxlY3RBbGwoKQogICAgICAgIC5kYXRhKHJvb3QubGlua3MoKSkKICAgICAgICAuam9pbigicGF0aCIpCiAgICAgICAgLmF0dHIoImQiLCBkMy5saW5rSG9yaXpvbnRhbCgpCiAgICAgICAgICAueChkID0+IGQueSkKICAgICAgICAgIC55KGQgPT4gZC54KSk7CgogICAgICBjb25zdCBub2RlID0gY29udGFpbmVyLmFwcGVuZCgiZyIpCiAgICAgICAgLmF0dHIoImNsYXNzIiwgIm5vZGVzIikKICAgICAgICAuYXR0cigic3Ryb2tlLWxpbmVqb2luIiwgInJvdW5kIikKICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMykKICAgICAgICAuc2VsZWN0QWxsKCJnIikKICAgICAgICAuZGF0YShyb290LmRlc2NlbmRhbnRzKCkpCiAgICAgICAgLmpvaW4oImciKQogICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBkID0+IGB0cmFuc2xhdGUoJHtkLnl9LCR7ZC54fSlgKQogICAgICAgIC5hdHRyKCJpZCIsIGQgPT4gYG5vZGVzLSR7ZC5kYXRhLm5hbWV9YCk7CgogICAgICBjb25zb2xlLmxvZygibm9kZXMiLCBub2RlKQoKICAgICAgY29uc3QgYm9yZGVyID0gY29udGFpbmVyLmFwcGVuZCgiZyIpCiAgICAgICAgLmF0dHIoImNsYXNzIiwgImJvcmRlcnMiKQogICAgICAgIC5zZWxlY3RBbGwoImNpcmNsZSIpCiAgICAgICAgLmRhdGEocm9vdC5kZXNjZW5kYW50cygpKQogICAgICAgIC5qb2luKCJjaXJjbGUiKQogICAgICAgIC5hdHRyKCJyIiwgMTIpCiAgICAgICAgLmF0dHIoImZpbGwiLCAibm9uZSIpCiAgICAgICAgLmF0dHIoInN0cm9rZSIsICJub25lIikKICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMikKICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZCA9PiBgdHJhbnNsYXRlKCR7ZC55fSwke2QueH0pYCkKICAgICAgICAuc3R5bGUoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKTsgLy8g56aB5q2iIGJvcmRlciDlhYPntKDmjqXmlLbpvKDmoIfkuovku7YKCiAgICAgIGJvcmRlci5yYWlzZSgpOwoKICAgICAgbm9kZS5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKGV2ZW50LCBkKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2coIm1vdXNlb3ZlciIsIGQuZGF0YS5uYW1lKTsKCiAgICAgICAgLy8g6K6+572uIGJvcmRlciDlhYPntKDnmoTmoLflvI8KICAgICAgICBib3JkZXIuYXR0cigic3Ryb2tlIiwgYiA9PiBiID09PSBkID8gIiM2MDk2RTYiIDogIm5vbmUiKTsKCiAgICAgICAgLy8gY29uc29sZS5sb2coIk5vZGUgbmFtZSBvbiBtb3VzZW92ZXI6IiwgZC5kYXRhLm5hbWUpOwogICAgICB9KQogICAgICAgIC5vbigibW91c2VvdXQiLCBmdW5jdGlvbiAoZXZlbnQsIGQpIHsKICAgICAgICAgIC8vIOenu+mZpCBib3JkZXIg5YWD57Sg55qE5qC35byPCiAgICAgICAgICBib3JkZXIuYXR0cigic3Ryb2tlIiwgIm5vbmUiKTsKICAgICAgICB9KTsKCgogICAgICBjb25zdCBncm91cENvbG9yTWFwID0gewogICAgICAgIDA6ICIjRkYwMDAwIiwKICAgICAgICAxOiAiI0E0RDNFRSIsCiAgICAgICAgMjogIiMzMkNEMzIiLAogICAgICAgIDM6ICIjRkY3RjUwIiwKICAgICAgfTsKCiAgICAgIG5vZGUuYXBwZW5kKCJjaXJjbGUiKQogICAgICAgIC5hdHRyKCJmaWxsIiwgZCA9PiBncm91cENvbG9yTWFwW2QuZGF0YS5ncm91cF0gfHwgIiNBNEQzRUUiKQogICAgICAgIC5hdHRyKCJpZCIsIGBub2RlVHJlZWApCiAgICAgICAgLmF0dHIoInIiLCAxMCk7CgogICAgICBub2RlLm9uKCJjbGljayIsIGZ1bmN0aW9uIChldmVudCwgZCkgewogICAgICAgIGNvbnN0IGV4aXN0aW5nQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9wdGlvbi1ib3gnKTsKICAgICAgICBpZiAoZXhpc3RpbmdCb3gpIHsKICAgICAgICAgIGlmIChwYXJzZUludChleGlzdGluZ0JveC5kYXRhc2V0Lm5vZGVJZCkgPT09IHBhcnNlSW50KGQuaWQpKSB7CiAgICAgICAgICAgIGV4aXN0aW5nQm94LnJlbW92ZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBleGlzdGluZ0JveC5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGQzLnNlbGVjdCgiYm9keSIpLmFwcGVuZCgiZGl2IikKICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJvcHRpb24tYm94IikKICAgICAgICAgIC5hdHRyKCJkYXRhLW5vZGUtaWQiLCBkLmlkKQogICAgICAgICAgLnN0eWxlKCJwb3NpdGlvbiIsICJhYnNvbHV0ZSIpCiAgICAgICAgICAuc3R5bGUoImxlZnQiLCBgJHtldmVudC5wYWdlWCArIDEwfXB4YCkKICAgICAgICAgIC5zdHlsZSgidG9wIiwgYCR7ZXZlbnQucGFnZVkgKyAxMH1weGApCiAgICAgICAgICAuc3R5bGUoImRpc3BsYXkiLCAiZmxleCIpCiAgICAgICAgICAuc3R5bGUoImdhcCIsICI4cHgiKQogICAgICAgICAgLnN0eWxlKCJib3JkZXIiLCAiMXB4IHNvbGlkICM3RjdGN0YiKQogICAgICAgICAgLnN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIiwgIiNGN0Y3RjciKQogICAgICAgICAgLnN0eWxlKCJ3aWR0aCIsICI4NnB4IikKICAgICAgICAgIC5zdHlsZSgiaGVpZ2h0IiwgIjI1cHgiKQogICAgICAgICAgLnN0eWxlKCJwYWRkaW5nIiwgIjIuNXB4IDAiKQogICAgICAgICAgLnN0eWxlKCJwYWRkaW5nLWxlZnQiLCAiOHB4IikKICAgICAgICAgIC5zdHlsZSgiYm9yZGVyLXJhZGl1cyIsICI4cHgiKQogICAgICAgICAgLnN0eWxlKCJhbGlnbi1pdGVtcyIsICJjZW50ZXIiKQogICAgICAgICAgLnN0eWxlKCJ6LWluZGV4IiwgMTAwMCk7CiAgICAgICAgb3B0aW9ucy5hcHBlbmQoImRpdiIpCiAgICAgICAgICAudGV4dCgiKyIpCiAgICAgICAgICAuc3R5bGUoImZvbnQtc2l6ZSIsICIyMHB4IikKICAgICAgICAgIC5zdHlsZSgiY29sb3IiLCAiIzY3OUQ0MyIpCiAgICAgICAgICAuc3R5bGUoImJvcmRlci1yYWRpdXMiLCAiNTAlIikKICAgICAgICAgIC5zdHlsZSgid2lkdGgiLCAiMjBweCIpCiAgICAgICAgICAuc3R5bGUoImhlaWdodCIsICIyMHB4IikKICAgICAgICAgIC5zdHlsZSgidGV4dC1hbGlnbiIsICJjZW50ZXIiKQogICAgICAgICAgLnN0eWxlKCJsaW5lLWhlaWdodCIsICIyMHB4IikKICAgICAgICAgIC5zdHlsZSgiYmFja2dyb3VuZC1jb2xvciIsICIjRDRFMkM4IikKICAgICAgICAgIC5vbigiY2xpY2siLCAoKSA9PiBjb25zb2xlLmxvZygiUGx1cyBjbGlja2VkIiwgZCkpOwogICAgICAgIG9wdGlvbnMuYXBwZW5kKCJkaXYiKQogICAgICAgICAgLnRleHQoIi0iKQogICAgICAgICAgLnRleHQoIi0iKQogICAgICAgICAgLnN0eWxlKCJmb250LXNpemUiLCAiMjBweCIpCiAgICAgICAgICAuc3R5bGUoImJvcmRlci1yYWRpdXMiLCAiNTAlIikKICAgICAgICAgIC5zdHlsZSgid2lkdGgiLCAiMjBweCIpCiAgICAgICAgICAuc3R5bGUoImhlaWdodCIsICIyMHB4IikKICAgICAgICAgIC5zdHlsZSgidGV4dC1hbGlnbiIsICJjZW50ZXIiKQogICAgICAgICAgLnN0eWxlKCJsaW5lLWhlaWdodCIsICIyMHB4IikKICAgICAgICAgIC5zdHlsZSgiYmFja2dyb3VuZC1jb2xvciIsICIjRDRFMkM4IikKICAgICAgICAgIC5zdHlsZSgiY29sb3IiLCAiIzY3OUQ0MyIpCiAgICAgICAgICAub24oImNsaWNrIiwgKCkgPT4gY29uc29sZS5sb2coIk1pbnVzIGNsaWNrZWQiKSk7CiAgICAgICAgb3B0aW9ucy5hcHBlbmQoImRpdiIpCiAgICAgICAgICAudGV4dCgiQSIpCiAgICAgICAgICAuc3R5bGUoImZvbnQtc2l6ZSIsICIxNHB4IikKICAgICAgICAgIC5zdHlsZSgiYm9yZGVyLXJhZGl1cyIsICI1MCUiKQogICAgICAgICAgLnN0eWxlKCJ3aWR0aCIsICIyMHB4IikKICAgICAgICAgIC5zdHlsZSgiaGVpZ2h0IiwgIjIwcHgiKQogICAgICAgICAgLnN0eWxlKCJ0ZXh0LWFsaWduIiwgImNlbnRlciIpCiAgICAgICAgICAuc3R5bGUoImJhY2tncm91bmQtY29sb3IiLCAiI0Q0RTJDOCIpCiAgICAgICAgICAuc3R5bGUoImNvbG9yIiwgIiM2NzlENDMiKQogICAgICAgICAgLm9uKCJjbGljayIsICgpID0+IHRoYXQuY29udmVydFRvSW1hZ2UoZXZlbnQsIGQpKTsKICAgICAgICBkMy5zZWxlY3QoImJvZHkiKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5vcHRpb24tYm94JykgJiYgIWV2ZW50LnRhcmdldC5jbG9zZXN0KCdjaXJjbGUnKSkgewogICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5vcHRpb24tYm94JykucmVtb3ZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0pOwoKCiAgICAgIG5vZGUuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAuYXR0cigiZHkiLCAiMC4zMWVtIikKICAgICAgICAuYXR0cigieCIsIGQgPT4gZC5jaGlsZHJlbiA/IDYgOiA2KQogICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsIGQgPT4gZC5jaGlsZHJlbiA/ICJlbmQiIDogInN0YXJ0IikKICAgICAgICAvLyAudGV4dChkID0+IGQuZGF0YS5uYW1lKQogICAgICAgIC50ZXh0KGQgPT4gewogICAgICAgICAgaWYgKGQuZGF0YS5ncm91cCA9PT0gMiB8fCBkLmRhdGEuZ3JvdXAgPT09IDMpIHsKICAgICAgICAgICAgcmV0dXJuIGAke2QuZGF0YS5uYW1lfWA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuYXR0cigic3Ryb2tlIiwgIndoaXRlIikKICAgICAgICAuYXR0cigicGFpbnQtb3JkZXIiLCAic3Ryb2tlIik7CgogICAgICBub2RlLmFwcGVuZCgidGl0bGUiKQogICAgICAgIC50ZXh0KGQgPT4gYElEOiAke2QuZGF0YS5uYW1lfSwgRGlzdGFuY2U6ICR7ZC5kYXRhLmRpc3RhbmNlfWApOwoKICAgICAgLy8gdGhpcy51cGRhdGVUaHVtYm5haWwoKTsKCiAgICAgIGNvbnN0IGxlZ2VuZCA9IHN2Zy5hcHBlbmQoImciKQogICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7b2ZmaGVpZ2h0fSwgJHtvZmZ3aWR0aCArIDEwfSlgKQogICAgICAgIC5hdHRyKCJmb250LWZhbWlseSIsICJzYW5zLXNlcmlmIikKICAgICAgICAuYXR0cigiZm9udC1zaXplIiwgMTApOwoKICAgICAgY29uc3QgdW5pcXVlR3JvdXBzID0gWzAsIDEsIDIsIDNdOwoKCiAgICAgIGNvbnN0IGxlZ2VuZEl0ZW1zID0gbGVnZW5kLnNlbGVjdEFsbCgiZyIpCiAgICAgICAgLmRhdGEodW5pcXVlR3JvdXBzKQogICAgICAgIC5lbnRlcigpLmFwcGVuZCgiZyIpCiAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIChkLCBpKSA9PiBgdHJhbnNsYXRlKDAsJHtpICogMjB9KWApOwoKICAgICAgbGVnZW5kSXRlbXMuYXBwZW5kKCJyZWN0IikKICAgICAgICAuYXR0cigid2lkdGgiLCAxOCkKICAgICAgICAuYXR0cigiaGVpZ2h0IiwgMTgpCiAgICAgICAgLmF0dHIoImZpbGwiLCBkID0+IGdyb3VwQ29sb3JNYXBbZF0pCgogICAgICBsZWdlbmRJdGVtcy5hcHBlbmQoInRleHQiKQogICAgICAgIC5hdHRyKCJ4IiwgMjQpCiAgICAgICAgLmF0dHIoInkiLCA5KQogICAgICAgIC5hdHRyKCJkeSIsICIwLjM1ZW0iKQogICAgICAgIC50ZXh0KGQgPT4gewogICAgICAgICAgaWYgKGQgPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuICJzdGFydCBub2RlIjsKICAgICAgICAgIH0gZWxzZSBpZiAoZCA9PT0gMSkgewogICAgICAgICAgICByZXR1cm4gIm5vcm1hbCBub2RlIjsKICAgICAgICAgIH0gZWxzZSBpZiAoZCA9PT0gMikgewogICAgICAgICAgICByZXR1cm4gImd0JnNlYXJjaCBpbnRlcnNlY3Rpb24iOwogICAgICAgICAgfSBlbHNlIGlmIChkID09PSAzKSB7CiAgICAgICAgICAgIHJldHVybiAic2VhcmNoIG90aGVyIjsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICB9CgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsKICAgICAgZGF0YVRyZWU6ICJkYXRhVHJlZSIsCiAgICAgIGRhdGFOb2RlbGluazogImRhdGFOb2RlTGluayIsCiAgICAgIHJldHJpZXZhbFNldDogInJldHJpZXZhbFNldCIsCiAgICAgIGRhdGFzZXROYW1lOiAiZGF0YXNldE5hbWUiLAogICAgICBtb2RlbE5hbWU6ICJtb2RlbE5hbWUiLAogICAgICByZXRyaWV2YWxJbmZvOiAicmV0cmlldmFsSW5mbyIsCiAgICAgIHNlbGVjdGVkTm9kZTogInNlbGVjdGVkTm9kZSIKICAgIH0pLAoKICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY3RlZE5vZGUobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCAhPT0gb2xkVmFsKSB7CiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZE5vZGUobmV3VmFsKTsKICAgICAgfQoKICAgIH0sCiAgICBzZWxlY3RlZFRhYihuZXdWYWwsIG9sZFZhbCkgewogICAgICBpZiAobmV3VmFsICE9PSBvbGRWYWwpIHsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICB0aGlzLmdldFZpZXdTaXplKCk7CiAgICAgICAgICB0aGlzLmluaXRHcmFwaCh0aGlzLnRyZWVEYXRhKTsKICAgICAgICAgIC8vIHRoaXMuaW5pdFRodW1ibmFpbCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["TreeView.vue"],"names":[],"mappings":";;AASA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TreeView.vue","sourceRoot":"src/views/MainView/RightMainView","sourcesContent":["<template>\n  <div class=\"tree-main\" ref=\"treeMain\">\n    <svg ref=\"tree\" class=\"tree-svg\"></svg>\n    <!-- <svg ref=\"thumbnailTree\" class=\"thumbnail-tree-svg\"></svg> -->\n  </div>\n</template>\n\n<script>\n\nimport * as d3 from \"d3\";\nimport { mapState } from \"vuex\";\nimport api from \"@/api/data\";\n\nexport default {\n  name: \"TreeView\",\n  components: {},\n  data() {\n    return {\n      treeData: {},\n      svgWidth: 0,\n      svgHeight: 0,\n      velocityDecay: 0.6,\n      thumbnailTreeWidth: 0, // 缩略图宽度\n      thumbnailTreeHeight: 0, // 缩略图高度\n\n\n\n      oldSelectedNode: '-1',\n\n    };\n  },\n  mounted() {\n    this.getViewSize();\n\n    this.treeData = this.$store.state.dataTree;\n    this.initGraph(this.treeData);\n\n    // this.initThumbnail();\n\n  },\n  methods: {\n    getViewSize() {\n      const tree = this.$refs.treeMain;\n      this.svgWidth = tree.clientWidth;\n      this.svgHeight = tree.clientHeight;\n\n      this.thumbnailTreeWidth = this.svgWidth / 5;\n      this.thumbnailTreeHeight = this.svgHeight / 5;\n    },\n    updateSelectedNode(selectedNode) {\n\n      // 使用选择器查找节点\n      const selectedElement = d3.select(`#nodes-${selectedNode}`);\n\n      // 检查元素是否存在\n      if (!selectedElement.empty()) {\n        if (selectedNode === this.oldSelectedNode) {\n          selectedElement\n            .attr(\"r\", 10) // 边框半径\n            .attr(\"stroke\", \"none\") // 边框颜色\n            .attr(\"stroke-width\", 3); // 边框宽度\n\n          this.oldSelectedNode = '-1';\n\n        } else {\n          selectedElement\n            .attr(\"r\", 4) // 边框半径\n            .attr(\"stroke\", \"yellow\") // 边框颜色\n            .attr(\"stroke-width\", 4); // 边框宽度\n\n          this.oldSelectedNode = selectedNode;\n\n        }\n\n      } else if (this.oldSelectedNode !== -1) {\n        d3.select(`#nodes-${this.oldSelectedNode}`)\n          .attr(\"r\", 10) // 边框半径\n          .attr(\"stroke\", \"none\") // 边框颜色\n          .attr(\"stroke-width\", 3); // 边框宽度\n\n        this.oldSelectedNode = '-1';\n\n      } else {\n        console.log(`元素 #nodes-${selectedNode} 未找到`);\n      }\n\n\n    },\n    async convertToImage(event, node) {\n\n      const res = await api.getImageUrl({ \"datasetName\": this.$store.state.datasetName, \"nodeId\": +node.data.name });\n      const imageUrl = res[\"data\"][\"imageUrl\"];\n      const patternId = `pattern-${+node.data.name}`;\n      const targetElement = d3.select(event.target);\n\n      const targetBBox = targetElement.node().getBBox();\n      const targetWidth = targetBBox.width;\n      const targetHeight = targetBBox.height;\n\n      let pattern = d3.select(`#${patternId}`);\n      if (pattern.empty()) {\n        // 如果 pattern 不存在，则创建\n        const svg = d3.select(this.$refs.tree);\n\n        // 确保 defs 存在\n        let defs = svg.select(\"defs\");\n        if (defs.empty()) {\n          defs = svg.append(\"defs\");\n        }\n\n        const pattern = defs.append(\"pattern\")\n          .attr(\"id\", patternId)\n          .attr(\"patternUnits\", \"objectBoundingBox\")\n          .attr(\"width\", 1) // 宽度为 1 表示相对于目标元素的宽度\n          .attr(\"height\", 1) // 高度为 1 表示相对于目标元素的高度\n          .attr(\"patternTransform\", \"translate(1, 1)\"); // 向右和向下移动 10 个单位\n\n        const image = pattern.append(\"image\")\n          .attr(\"xlink:href\", imageUrl)\n          .attr(\"width\", 58)\n          .attr(\"height\", 58)\n          .attr(\"preserveAspectRatio\", \"xMidYMid slice\");\n      }\n\n      // 填充目标元素\n      targetElement\n        .attr(\"r\", 30)\n        .attr(\"fill\", `url(#${patternId})`)\n        .attr(\"stroke\", \"#000\") // 设置边框颜色\n        .attr(\"stroke-width\", 2); // 设置边框宽度\n    },\n    initThumbnail() {\n      const thumbnail = d3.select(this.$refs.thumbnailTree);\n      thumbnail\n        .attr(\"width\", this.thumbnailTreeWidth)\n        .attr(\"height\", this.thumbnailTreeHeight)\n        .attr(\"viewBox\", `0 0 ${this.thumbnailTreeWidth} ${this.thumbnailTreeHeight}`)\n        .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n        .attr(\"style\", \"position: absolute; top: 120px; right: 40px; border: 1px solid #ccc; background: #fff;\");\n    },\n    updateThumbnail() {\n      const that = this;\n      const thumbnail = d3.select(this.$refs.thumbnailTree);\n      thumbnail.selectAll(\"*\").remove();\n      const container = thumbnail.append(\"g\")\n        .attr(\"transform\", `scale(${that.thumbnailTreeWidth / that.svgWidth}, ${that.thumbnailTreeHeight / that.svgHeight}) translate(0, ${that.svgHeight / 2})`);\n\n      // Clone legend and link nodes\n      const legendNode = d3.select(that.$refs.tree).select(`.nodes`).node().cloneNode(true);\n      const linkNode = d3.select(that.$refs.tree).select(`#linkTree`).node().cloneNode(true);\n\n      container.append(() => legendNode);\n      container.append(() => linkNode);\n\n    },\n    initGraph(dataObj) {\n      const that = this;\n      const width = that.svgWidth;\n      // parse data\n      const recall = dataObj[\"metric\"]['recall'];\n      const data = dataObj.treeData[\"0\"];\n      const root = d3.hierarchy(data);\n\n      const dx = 30;\n      const dy = width / (root.height + 1);\n\n      const tree = d3.tree().nodeSize([dx, dy]);\n\n      root.sort((a, b) => d3.ascending(a.data.name, b.data.name));\n      tree(root);\n\n      let x0 = Infinity;\n      let x1 = -x0;\n      root.each(d => {\n        if (d.x > x1) x1 = d.x;\n        if (d.x < x0) x0 = d.x;\n      });\n\n      // 打印结果\n      const height = Math.max(x1 - x0 + dx * 2, that.svgHeight);\n\n      d3.select(this.$refs[\"tree\"]).selectAll(\"*\").remove();\n\n      const svg = d3.select(this.$refs[\"tree\"])\n        .attr(\"viewBox\", [-dy / 2, x0 - dx, width, height])\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .attr(\"style\", \"max-width: 100%; height: auto; font: 10px sans-serif;\")\n        .call(d3.zoom().on(\"zoom\", (event) => {\n          container.attr(\"transform\", event.transform);\n        }));\n\n      const container = svg\n        .append(\"g\")\n        .attr(\"class\", \"container\");\n      // .attr(\"transform\", `translate(0, ${dx})`);\n      const offheight = -dy / 3;\n      const offwidth = x0 + dx / 3 * 2;\n      svg.append(\"text\")\n        .attr(\"transform\", `translate(${offheight}, ${offwidth})`)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"font-size\", 15)\n        .text(`Recall: ${recall}`);\n\n      const link = container.append(\"g\")\n        .attr(\"class\", \"links\")\n        .attr(\"id\", `linkTree`)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"#555\")\n        .attr(\"stroke-opacity\", 0.4)\n        .attr(\"stroke-width\", 1.5)\n        .selectAll()\n        .data(root.links())\n        .join(\"path\")\n        .attr(\"d\", d3.linkHorizontal()\n          .x(d => d.y)\n          .y(d => d.x));\n\n      const node = container.append(\"g\")\n        .attr(\"class\", \"nodes\")\n        .attr(\"stroke-linejoin\", \"round\")\n        .attr(\"stroke-width\", 3)\n        .selectAll(\"g\")\n        .data(root.descendants())\n        .join(\"g\")\n        .attr(\"transform\", d => `translate(${d.y},${d.x})`)\n        .attr(\"id\", d => `nodes-${d.data.name}`);\n\n      console.log(\"nodes\", node)\n\n      const border = container.append(\"g\")\n        .attr(\"class\", \"borders\")\n        .selectAll(\"circle\")\n        .data(root.descendants())\n        .join(\"circle\")\n        .attr(\"r\", 12)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", \"none\")\n        .attr(\"stroke-width\", 2)\n        .attr(\"transform\", d => `translate(${d.y},${d.x})`)\n        .style(\"pointer-events\", \"none\"); // 禁止 border 元素接收鼠标事件\n\n      border.raise();\n\n      node.on(\"mouseover\", function (event, d) {\n        // console.log(\"mouseover\", d.data.name);\n\n        // 设置 border 元素的样式\n        border.attr(\"stroke\", b => b === d ? \"#6096E6\" : \"none\");\n\n        // console.log(\"Node name on mouseover:\", d.data.name);\n      })\n        .on(\"mouseout\", function (event, d) {\n          // 移除 border 元素的样式\n          border.attr(\"stroke\", \"none\");\n        });\n\n\n      const groupColorMap = {\n        0: \"#FF0000\",\n        1: \"#A4D3EE\",\n        2: \"#32CD32\",\n        3: \"#FF7F50\",\n      };\n\n      node.append(\"circle\")\n        .attr(\"fill\", d => groupColorMap[d.data.group] || \"#A4D3EE\")\n        .attr(\"id\", `nodeTree`)\n        .attr(\"r\", 10);\n\n      node.on(\"click\", function (event, d) {\n        const existingBox = document.querySelector('.option-box');\n        if (existingBox) {\n          if (parseInt(existingBox.dataset.nodeId) === parseInt(d.id)) {\n            existingBox.remove();\n            return;\n          }\n          existingBox.remove();\n        }\n        const options = d3.select(\"body\").append(\"div\")\n          .attr(\"class\", \"option-box\")\n          .attr(\"data-node-id\", d.id)\n          .style(\"position\", \"absolute\")\n          .style(\"left\", `${event.pageX + 10}px`)\n          .style(\"top\", `${event.pageY + 10}px`)\n          .style(\"display\", \"flex\")\n          .style(\"gap\", \"8px\")\n          .style(\"border\", \"1px solid #7F7F7F\")\n          .style(\"background-color\", \"#F7F7F7\")\n          .style(\"width\", \"86px\")\n          .style(\"height\", \"25px\")\n          .style(\"padding\", \"2.5px 0\")\n          .style(\"padding-left\", \"8px\")\n          .style(\"border-radius\", \"8px\")\n          .style(\"align-items\", \"center\")\n          .style(\"z-index\", 1000);\n        options.append(\"div\")\n          .text(\"+\")\n          .style(\"font-size\", \"20px\")\n          .style(\"color\", \"#679D43\")\n          .style(\"border-radius\", \"50%\")\n          .style(\"width\", \"20px\")\n          .style(\"height\", \"20px\")\n          .style(\"text-align\", \"center\")\n          .style(\"line-height\", \"20px\")\n          .style(\"background-color\", \"#D4E2C8\")\n          .on(\"click\", () => console.log(\"Plus clicked\", d));\n        options.append(\"div\")\n          .text(\"-\")\n          .text(\"-\")\n          .style(\"font-size\", \"20px\")\n          .style(\"border-radius\", \"50%\")\n          .style(\"width\", \"20px\")\n          .style(\"height\", \"20px\")\n          .style(\"text-align\", \"center\")\n          .style(\"line-height\", \"20px\")\n          .style(\"background-color\", \"#D4E2C8\")\n          .style(\"color\", \"#679D43\")\n          .on(\"click\", () => console.log(\"Minus clicked\"));\n        options.append(\"div\")\n          .text(\"A\")\n          .style(\"font-size\", \"14px\")\n          .style(\"border-radius\", \"50%\")\n          .style(\"width\", \"20px\")\n          .style(\"height\", \"20px\")\n          .style(\"text-align\", \"center\")\n          .style(\"background-color\", \"#D4E2C8\")\n          .style(\"color\", \"#679D43\")\n          .on(\"click\", () => that.convertToImage(event, d));\n        d3.select(\"body\").on(\"click\", function (event) {\n          if (!event.target.closest('.option-box') && !event.target.closest('circle')) {\n            d3.selectAll('.option-box').remove();\n          }\n        });\n        event.stopPropagation();\n      });\n\n\n      node.append(\"text\")\n        .attr(\"dy\", \"0.31em\")\n        .attr(\"x\", d => d.children ? 6 : 6)\n        .attr(\"text-anchor\", d => d.children ? \"end\" : \"start\")\n        // .text(d => d.data.name)\n        .text(d => {\n          if (d.data.group === 2 || d.data.group === 3) {\n            return `${d.data.name}`;\n          } else {\n            return \"\";\n          }\n        })\n        .attr(\"stroke\", \"white\")\n        .attr(\"paint-order\", \"stroke\");\n\n      node.append(\"title\")\n        .text(d => `ID: ${d.data.name}, Distance: ${d.data.distance}`);\n\n      // this.updateThumbnail();\n\n      const legend = svg.append(\"g\")\n        .attr(\"transform\", `translate(${offheight}, ${offwidth + 10})`)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"font-size\", 10);\n\n      const uniqueGroups = [0, 1, 2, 3];\n\n\n      const legendItems = legend.selectAll(\"g\")\n        .data(uniqueGroups)\n        .enter().append(\"g\")\n        .attr(\"transform\", (d, i) => `translate(0,${i * 20})`);\n\n      legendItems.append(\"rect\")\n        .attr(\"width\", 18)\n        .attr(\"height\", 18)\n        .attr(\"fill\", d => groupColorMap[d])\n\n      legendItems.append(\"text\")\n        .attr(\"x\", 24)\n        .attr(\"y\", 9)\n        .attr(\"dy\", \"0.35em\")\n        .text(d => {\n          if (d === 0) {\n            return \"start node\";\n          } else if (d === 1) {\n            return \"normal node\";\n          } else if (d === 2) {\n            return \"gt&search intersection\";\n          } else if (d === 3) {\n            return \"search other\";\n          }\n        });\n\n    }\n\n  },\n  computed: {\n    ...mapState({\n      dataTree: \"dataTree\",\n      dataNodelink: \"dataNodeLink\",\n      retrievalSet: \"retrievalSet\",\n      datasetName: \"datasetName\",\n      modelName: \"modelName\",\n      retrievalInfo: \"retrievalInfo\",\n      selectedNode: \"selectedNode\"\n    }),\n\n  },\n  watch: {\n    selectedNode(newVal, oldVal) {\n      if (newVal !== oldVal) {\n        this.updateSelectedNode(newVal);\n      }\n\n    },\n    selectedTab(newVal, oldVal) {\n      if (newVal !== oldVal) {\n        this.$nextTick(() => {\n          this.getViewSize();\n          this.initGraph(this.treeData);\n          // this.initThumbnail();\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.tree-main {\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n\n  .tree-svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  .thumbnail-tree-svg {\n    position: absolute;\n    right: 20px;\n    top: 120px;\n    border: 1px solid #ccc;\n    background: #fff;\n  }\n}\n\n.option-box {\n  border: 1px solid #F7F7F7;\n  background-color: #F7F7F7;\n  padding: 5px;\n  position: absolute;\n  z-index: 1000;\n\n  div {\n    margin: 2px 0;\n    cursor: pointer;\n  }\n\n  div:hover {\n    background-color: #f0f0f0;\n  }\n}\n\n.option-button {\n  padding: 5px 10px;\n  border: 1px solid #000;\n  border-radius: 5px;\n  cursor: pointer;\n  background-color: #f0f0f0;\n  font-size: 14px;\n  font-family: Arial, sans-serif;\n  color: red;\n}\n\n.option-button:hover {\n  background-color: #e0e0e0;\n}\n</style>"]}]}