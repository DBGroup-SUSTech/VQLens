{"remainingRequest":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yansha/VDProject/VDFrontend/src/views/MainView/MiddleMainView/TreeView.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/yansha/VDProject/VDFrontend/src/views/MainView/MiddleMainView/TreeView.vue","mtime":1734619211220},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js","mtime":1735202380921},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js","mtime":1735202381045}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgCiAgaW1wb3J0ICogYXMgZDMgZnJvbSAiZDMiOwogIGltcG9ydCB7bWFwU3RhdGV9IGZyb20gInZ1ZXgiOwogIGltcG9ydCBhcGkgZnJvbSAiQC9hcGkvZGF0YSI7CiAgCiAgZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlRyZWVWaWV3IiwKICAgIGNvbXBvbmVudHM6IHt9LAogICAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0cmVlRGF0YToge30sCiAgICAgICAgc3ZnV2lkdGg6IDAsCiAgICAgICAgc3ZnSGVpZ2h0OiAwLAogICAgICAgIHZlbG9jaXR5RGVjYXk6IDAuNiwKICAgICAgICB0aHVtYm5haWxUcmVlV2lkdGg6IDAsIC8vIOe8qeeVpeWbvuWuveW6pgogICAgICAgIHRodW1ibmFpbFRyZWVIZWlnaHQ6IDAsIC8vIOe8qeeVpeWbvumrmOW6pgogIAogICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgICB0aGlzLmdldFZpZXdTaXplKCk7CgogICAgICAgICAgdGhpcy50cmVlRGF0YSA9IHRoaXMuJHN0b3JlLnN0YXRlLmRhdGFUcmVlOwogICAgICAgICAgdGhpcy5pbml0R3JhcGgodGhpcy50cmVlRGF0YSk7CgogICAgICAgICAgdGhpcy5pbml0VGh1bWJuYWlsKCk7CiAgCiAgICB9LAogICAgbWV0aG9kczogewogICAgICBnZXRWaWV3U2l6ZSgpIHsKICAgICAgICBjb25zdCB0cmVlID0gdGhpcy4kcmVmcy50cmVlTWFpbjsgLy8g5LmL5ZCO5L+u5pS5CiAgICAgICAgdGhpcy5zdmdXaWR0aCA9IHRyZWUuY2xpZW50V2lkdGg7CiAgICAgICAgdGhpcy5zdmdIZWlnaHQgPSB0cmVlLmNsaWVudEhlaWdodDsKICAKICAgICAgICB0aGlzLnRodW1ibmFpbFRyZWVXaWR0aCA9IHRoaXMuc3ZnV2lkdGggLyA1Oy8vIOe8qeeVpeWbvuWuveW6pgogICAgICAgIHRoaXMudGh1bWJuYWlsVHJlZUhlaWdodCA9IHRoaXMuc3ZnSGVpZ2h0IC8gNTsKICAgICAgfSwKICAgICAgYXN5bmMgY29udmVydFRvSW1hZ2UoZXZlbnQsIG5vZGUpIHsKCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpLmdldEltYWdlVXJsKHsgImRhdGFzZXROYW1lIjogdGhpcy4kc3RvcmUuc3RhdGUuZGF0YXNldE5hbWUsICJub2RlSWQiOiArbm9kZS5kYXRhLm5hbWUgfSk7CiAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSByZXNbImRhdGEiXVsiaW1hZ2VVcmwiXTsKICAgICAgICBjb25zdCBwYXR0ZXJuSWQgPSBgcGF0dGVybi0keytub2RlLmRhdGEubmFtZX1gOwogICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBkMy5zZWxlY3QoZXZlbnQudGFyZ2V0KTsKICAKICAgICAgICBjb25zdCB0YXJnZXRCQm94ID0gdGFyZ2V0RWxlbWVudC5ub2RlKCkuZ2V0QkJveCgpOwogICAgICAgIGNvbnN0IHRhcmdldFdpZHRoID0gdGFyZ2V0QkJveC53aWR0aDsKICAgICAgICBjb25zdCB0YXJnZXRIZWlnaHQgPSB0YXJnZXRCQm94LmhlaWdodDsKICAKICAgICAgICBsZXQgcGF0dGVybiA9IGQzLnNlbGVjdChgIyR7cGF0dGVybklkfWApOwogICAgICAgIGlmIChwYXR0ZXJuLmVtcHR5KCkpIHsKICAgICAgICAgIC8vIOWmguaenCBwYXR0ZXJuIOS4jeWtmOWcqO+8jOWImeWIm+W7ugogICAgICAgICAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KHRoaXMuJHJlZnMudHJlZSk7CiAgCiAgICAgICAgICAvLyDnoa7kv50gZGVmcyDlrZjlnKgKICAgICAgICAgIGxldCBkZWZzID0gc3ZnLnNlbGVjdCgiZGVmcyIpOwogICAgICAgICAgaWYgKGRlZnMuZW1wdHkoKSkgewogICAgICAgICAgICBkZWZzID0gc3ZnLmFwcGVuZCgiZGVmcyIpOwogICAgICAgICAgfQogIAogICAgICAgICAgY29uc3QgcGF0dGVybiA9IGRlZnMuYXBwZW5kKCJwYXR0ZXJuIikKICAgICAgICAgICAgICAuYXR0cigiaWQiLCBwYXR0ZXJuSWQpCiAgICAgICAgICAgICAgLmF0dHIoInBhdHRlcm5Vbml0cyIsICJvYmplY3RCb3VuZGluZ0JveCIpCiAgICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgMSkgLy8g5a695bqm5Li6IDEg6KGo56S655u45a+55LqO55uu5qCH5YWD57Sg55qE5a695bqmCiAgICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIDEpIC8vIOmrmOW6puS4uiAxIOihqOekuuebuOWvueS6juebruagh+WFg+e0oOeahOmrmOW6pgogICAgICAgICAgICAgIC5hdHRyKCJwYXR0ZXJuVHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgxLCAxKSIpOyAvLyDlkJHlj7PlkozlkJHkuIvnp7vliqggMTAg5Liq5Y2V5L2NCiAgCiAgICAgICAgICBjb25zdCBpbWFnZSA9IHBhdHRlcm4uYXBwZW5kKCJpbWFnZSIpCiAgICAgICAgICAgICAgLmF0dHIoInhsaW5rOmhyZWYiLCBpbWFnZVVybCkKICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCA1OCkKICAgICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgNTgpCiAgICAgICAgICAgICAgLmF0dHIoInByZXNlcnZlQXNwZWN0UmF0aW8iLCAieE1pZFlNaWQgc2xpY2UiKTsKICAgICAgICB9CiAgCiAgICAgICAgLy8g5aGr5YWF55uu5qCH5YWD57SgCiAgICAgICAgdGFyZ2V0RWxlbWVudAogICAgICAgICAgICAuYXR0cigiciIsIDMwKQogICAgICAgICAgICAuYXR0cigiZmlsbCIsIGB1cmwoIyR7cGF0dGVybklkfSlgKQogICAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiMwMDAiKSAvLyDorr7nva7ovrnmoYbpopzoibIKICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsIDIpOyAvLyDorr7nva7ovrnmoYblrr3luqYKICAgICAgfSwKICAgICAgaW5pdFRodW1ibmFpbCgpIHsKICAgICAgICBjb25zdCB0aHVtYm5haWwgPSBkMy5zZWxlY3QodGhpcy4kcmVmcy50aHVtYm5haWxUcmVlKTsKICAgICAgICB0aHVtYm5haWwKICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgdGhpcy50aHVtYm5haWxUcmVlV2lkdGgpCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCB0aGlzLnRodW1ibmFpbFRyZWVIZWlnaHQpCiAgICAgICAgICAgIC5hdHRyKCJ2aWV3Qm94IiwgYDAgMCAke3RoaXMudGh1bWJuYWlsVHJlZVdpZHRofSAke3RoaXMudGh1bWJuYWlsVHJlZUhlaWdodH1gKQogICAgICAgICAgICAuYXR0cigicHJlc2VydmVBc3BlY3RSYXRpbyIsICJ4TWlkWU1pZCBtZWV0IikKICAgICAgICAgICAgLmF0dHIoInN0eWxlIiwgInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAxMjBweDsgcmlnaHQ6IDQwcHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6ICNmZmY7Iik7CiAgICAgIH0sCiAgICAgIHVwZGF0ZVRodW1ibmFpbCgpIHsKICAgICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgICBjb25zdCB0aHVtYm5haWwgPSBkMy5zZWxlY3QodGhpcy4kcmVmcy50aHVtYm5haWxUcmVlKTsKICAgICAgICB0aHVtYm5haWwuc2VsZWN0QWxsKCIqIikucmVtb3ZlKCk7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGh1bWJuYWlsLmFwcGVuZCgiZyIpCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgc2NhbGUoJHt0aGF0LnRodW1ibmFpbFRyZWVXaWR0aCAvIHRoYXQuc3ZnV2lkdGh9LCAke3RoYXQudGh1bWJuYWlsVHJlZUhlaWdodCAvIHRoYXQuc3ZnSGVpZ2h0fSkgdHJhbnNsYXRlKDAsICR7dGhhdC5zdmdIZWlnaHQgLyAyfSlgKTsKICAKICAgICAgICAvLyBDbG9uZSBsZWdlbmQgYW5kIGxpbmsgbm9kZXMKICAgICAgICBjb25zdCBsZWdlbmROb2RlID0gZDMuc2VsZWN0KHRoYXQuJHJlZnMudHJlZSkuc2VsZWN0KGAubm9kZXNgKS5ub2RlKCkuY2xvbmVOb2RlKHRydWUpOwogICAgICAgIGNvbnN0IGxpbmtOb2RlID0gZDMuc2VsZWN0KHRoYXQuJHJlZnMudHJlZSkuc2VsZWN0KGAjbGlua1RyZWVgKS5ub2RlKCkuY2xvbmVOb2RlKHRydWUpOwogIAogICAgICAgIGNvbnRhaW5lci5hcHBlbmQoKCkgPT4gbGVnZW5kTm9kZSk7CiAgICAgICAgY29udGFpbmVyLmFwcGVuZCgoKSA9PiBsaW5rTm9kZSk7CiAgCiAgICAgIH0sCiAgICAgIGluaXRHcmFwaChkYXRhT2JqKSB7CiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7CiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGF0LnN2Z1dpZHRoOwogICAgICAgIC8vIHBhcnNlIGRhdGEKICAgICAgICBjb25zdCByZWNhbGwgPSBkYXRhT2JqWyJtZXRyaWMiXVsncmVjYWxsJ107CiAgICAgICAgY29uc3QgZGF0YSA9IGRhdGFPYmoudHJlZURhdGFbIjAiXTsKICAgICAgICBjb25zdCByb290ID0gZDMuaGllcmFyY2h5KGRhdGEpOwogIAogICAgICAgIGNvbnN0IGR4ID0gMzA7CiAgICAgICAgY29uc3QgZHkgPSB3aWR0aCAvIChyb290LmhlaWdodCArIDEpOwogIAogICAgICAgIGNvbnN0IHRyZWUgPSBkMy50cmVlKCkubm9kZVNpemUoW2R4LCBkeV0pOwogIAogICAgICAgIHJvb3Quc29ydCgoYSwgYikgPT4gZDMuYXNjZW5kaW5nKGEuZGF0YS5uYW1lLCBiLmRhdGEubmFtZSkpOwogICAgICAgIHRyZWUocm9vdCk7CiAgCiAgICAgICAgbGV0IHgwID0gSW5maW5pdHk7CiAgICAgICAgbGV0IHgxID0gLXgwOwogICAgICAgIHJvb3QuZWFjaChkID0+IHsKICAgICAgICAgIGlmIChkLnggPiB4MSkgeDEgPSBkLng7CiAgICAgICAgICBpZiAoZC54IDwgeDApIHgwID0gZC54OwogICAgICAgIH0pOwogIAogICAgICAgIC8vIOaJk+WNsOe7k+aenAogICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWF4KHgxIC0geDAgKyBkeCAqIDIsIHRoYXQuc3ZnSGVpZ2h0KTsKICAKICAgICAgICBkMy5zZWxlY3QodGhpcy4kcmVmc1sidHJlZSJdKS5zZWxlY3RBbGwoIioiKS5yZW1vdmUoKTsKICAKICAgICAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QodGhpcy4kcmVmc1sidHJlZSJdKQogICAgICAgICAgICAuYXR0cigidmlld0JveCIsIFstZHkgLyAyLCB4MCAtIGR4LCB3aWR0aCwgaGVpZ2h0XSkKICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgd2lkdGgpCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpCiAgICAgICAgICAgIC5hdHRyKCJzdHlsZSIsICJtYXgtd2lkdGg6IDEwMCU7IGhlaWdodDogYXV0bzsgZm9udDogMTBweCBzYW5zLXNlcmlmOyIpCiAgICAgICAgICAgIC5jYWxsKGQzLnpvb20oKS5vbigiem9vbSIsIChldmVudCkgPT4gewogICAgICAgICAgICAgIGNvbnRhaW5lci5hdHRyKCJ0cmFuc2Zvcm0iLCBldmVudC50cmFuc2Zvcm0pOwogICAgICAgICAgICB9KSk7CiAgCiAgICAgICAgY29uc3QgY29udGFpbmVyID0gc3ZnLmFwcGVuZCgiZyIpOwogICAgICAgIC8vIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKDAsICR7ZHh9KWApOwogICAgICAgIGNvbnN0IG9mZmhlaWdodCA9IC1keSAvIDM7CiAgICAgICAgY29uc3Qgb2Zmd2lkdGggPSB4MCArIGR4IC8gMyAqIDI7CiAgICAgICAgc3ZnLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7b2ZmaGVpZ2h0fSwgJHtvZmZ3aWR0aH0pYCkKICAgICAgICAgICAgLmF0dHIoImZvbnQtZmFtaWx5IiwgInNhbnMtc2VyaWYiKQogICAgICAgICAgICAuYXR0cigiZm9udC1zaXplIiwgMTUpCiAgICAgICAgICAgIC50ZXh0KGBSZWNhbGw6ICR7cmVjYWxsfWApOwogIAogICAgICAgIGNvbnN0IGxpbmsgPSBjb250YWluZXIuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxpbmtzIikKICAgICAgICAgICAgLmF0dHIoImlkIiwgYGxpbmtUcmVlYCkKICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAibm9uZSIpCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UiLCAiIzU1NSIpCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utb3BhY2l0eSIsIDAuNCkKICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsIDEuNSkKICAgICAgICAgICAgLnNlbGVjdEFsbCgpCiAgICAgICAgICAgIC5kYXRhKHJvb3QubGlua3MoKSkKICAgICAgICAgICAgLmpvaW4oInBhdGgiKQogICAgICAgICAgICAuYXR0cigiZCIsIGQzLmxpbmtIb3Jpem9udGFsKCkKICAgICAgICAgICAgICAgIC54KGQgPT4gZC55KQogICAgICAgICAgICAgICAgLnkoZCA9PiBkLngpKTsKICAKICAgICAgICBjb25zdCBub2RlID0gY29udGFpbmVyLmFwcGVuZCgiZyIpCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJub2RlcyIpCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UtbGluZWpvaW4iLCAicm91bmQiKQogICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMykKICAgICAgICAgICAgLnNlbGVjdEFsbCgiZyIpCiAgICAgICAgICAgIC5kYXRhKHJvb3QuZGVzY2VuZGFudHMoKSkKICAgICAgICAgICAgLmpvaW4oImciKQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZCA9PiBgdHJhbnNsYXRlKCR7ZC55fSwke2QueH0pYCk7CiAgCiAgLy8g5a6a5LmJIGJvcmRlciDlhYPntKAKICAgICAgICBjb25zdCBib3JkZXIgPSBjb250YWluZXIuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImJvcmRlcnMiKQogICAgICAgICAgICAuc2VsZWN0QWxsKCJjaXJjbGUiKQogICAgICAgICAgICAuZGF0YShyb290LmRlc2NlbmRhbnRzKCkpCiAgICAgICAgICAgIC5qb2luKCJjaXJjbGUiKQogICAgICAgICAgICAuYXR0cigiciIsIDEyKQogICAgICAgICAgICAuYXR0cigiZmlsbCIsICJub25lIikKICAgICAgICAgICAgLmF0dHIoInN0cm9rZSIsICJub25lIikKICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsIDIpCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBkID0+IGB0cmFuc2xhdGUoJHtkLnl9LCR7ZC54fSlgKQogICAgICAgICAgICAuc3R5bGUoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKTsgLy8g56aB5q2iIGJvcmRlciDlhYPntKDmjqXmlLbpvKDmoIfkuovku7YKICAKICAvLyDlsIYgYm9yZGVyIOWFg+e0oOaUvuWcqCBub2RlcyDlkI7pnaIKICAgICAgICBib3JkZXIucmFpc2UoKTsKICAKICAvLyDkuovku7blpITnkIblh73mlbAKICAgICAgICBub2RlLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbiAoZXZlbnQsIGQpIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJtb3VzZW92ZXIiLCBkLmRhdGEubmFtZSk7CiAgCiAgICAgICAgICAvLyDorr7nva4gYm9yZGVyIOWFg+e0oOeahOagt+W8jwogICAgICAgICAgYm9yZGVyLmF0dHIoInN0cm9rZSIsIGIgPT4gYiA9PT0gZCA/ICIjNjA5NkU2IiA6ICJub25lIik7CiAgCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygiTm9kZSBuYW1lIG9uIG1vdXNlb3ZlcjoiLCBkLmRhdGEubmFtZSk7CiAgICAgICAgfSkKICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uIChldmVudCwgZCkgewogICAgICAgICAgICAgIC8vIOenu+mZpCBib3JkZXIg5YWD57Sg55qE5qC35byPCiAgICAgICAgICAgICAgYm9yZGVyLmF0dHIoInN0cm9rZSIsICJub25lIik7CiAgICAgICAgICAgIH0pOwogIAogIAogICAgICAgIGNvbnN0IGdyb3VwQ29sb3JNYXAgPSB7CiAgICAgICAgICAwOiAiI0ZGMDAwMCIsCiAgICAgICAgICAxOiAiI0E0RDNFRSIsCiAgICAgICAgICAyOiAiIzMyQ0QzMiIsCiAgICAgICAgICAzOiAiI0ZGN0Y1MCIsCiAgICAgICAgfTsKICAKICAgICAgICBub2RlLmFwcGVuZCgiY2lyY2xlIikKICAgICAgICAgICAgLmF0dHIoImZpbGwiLCBkID0+IGdyb3VwQ29sb3JNYXBbZC5kYXRhLmdyb3VwXSB8fCAiI0E0RDNFRSIpCiAgICAgICAgICAgIC5hdHRyKCJpZCIsIGBub2RlVHJlZWApCiAgICAgICAgICAgIC5hdHRyKCJyIiwgMTApOwogIAogICAgICAgIG5vZGUub24oImNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50LCBkKSB7CiAgICAgICAgICBjb25zdCBleGlzdGluZ0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHRpb24tYm94Jyk7CiAgICAgICAgICBpZiAoZXhpc3RpbmdCb3gpIHsKICAgICAgICAgICAgaWYgKHBhcnNlSW50KGV4aXN0aW5nQm94LmRhdGFzZXQubm9kZUlkKSA9PT0gcGFyc2VJbnQoZC5pZCkpIHsKICAgICAgICAgICAgICBleGlzdGluZ0JveC5yZW1vdmUoKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXhpc3RpbmdCb3gucmVtb3ZlKCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBvcHRpb25zID0gZDMuc2VsZWN0KCJib2R5IikuYXBwZW5kKCJkaXYiKQogICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJvcHRpb24tYm94IikKICAgICAgICAgICAgICAuYXR0cigiZGF0YS1ub2RlLWlkIiwgZC5pZCkKICAgICAgICAgICAgICAuc3R5bGUoInBvc2l0aW9uIiwgImFic29sdXRlIikKICAgICAgICAgICAgICAuc3R5bGUoImxlZnQiLCBgJHtldmVudC5wYWdlWCArIDEwfXB4YCkKICAgICAgICAgICAgICAuc3R5bGUoInRvcCIsIGAke2V2ZW50LnBhZ2VZICsgMTB9cHhgKQogICAgICAgICAgICAgIC5zdHlsZSgiZGlzcGxheSIsICJmbGV4IikKICAgICAgICAgICAgICAuc3R5bGUoImdhcCIsICI4cHgiKQogICAgICAgICAgICAgIC5zdHlsZSgiYm9yZGVyIiwgIjFweCBzb2xpZCAjN0Y3RjdGIikKICAgICAgICAgICAgICAuc3R5bGUoImJhY2tncm91bmQtY29sb3IiLCAiI0Y3RjdGNyIpCiAgICAgICAgICAgICAgLnN0eWxlKCJ3aWR0aCIsICI4NnB4IikKICAgICAgICAgICAgICAuc3R5bGUoImhlaWdodCIsICIyNXB4IikKICAgICAgICAgICAgICAuc3R5bGUoInBhZGRpbmciLCAiMi41cHggMCIpCiAgICAgICAgICAgICAgLnN0eWxlKCJwYWRkaW5nLWxlZnQiLCAiOHB4IikKICAgICAgICAgICAgICAuc3R5bGUoImJvcmRlci1yYWRpdXMiLCAiOHB4IikKICAgICAgICAgICAgICAuc3R5bGUoImFsaWduLWl0ZW1zIiwgImNlbnRlciIpCiAgICAgICAgICAgICAgLnN0eWxlKCJ6LWluZGV4IiwgMTAwMCk7CiAgICAgICAgICBvcHRpb25zLmFwcGVuZCgiZGl2IikKICAgICAgICAgICAgICAudGV4dCgiKyIpCiAgICAgICAgICAgICAgLnN0eWxlKCJmb250LXNpemUiLCAiMjBweCIpCiAgICAgICAgICAgICAgLnN0eWxlKCJjb2xvciIsICIjNjc5RDQzIikKICAgICAgICAgICAgICAuc3R5bGUoImJvcmRlci1yYWRpdXMiLCAiNTAlIikKICAgICAgICAgICAgICAuc3R5bGUoIndpZHRoIiwgIjIwcHgiKQogICAgICAgICAgICAgIC5zdHlsZSgiaGVpZ2h0IiwgIjIwcHgiKQogICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbGlnbiIsICJjZW50ZXIiKQogICAgICAgICAgICAgIC5zdHlsZSgibGluZS1oZWlnaHQiLCAiMjBweCIpCiAgICAgICAgICAgICAgLnN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIiwgIiNENEUyQzgiKQogICAgICAgICAgICAgIC5vbigiY2xpY2siLCAoKSA9PiBjb25zb2xlLmxvZygiUGx1cyBjbGlja2VkIiwgZCkpOwogICAgICAgICAgb3B0aW9ucy5hcHBlbmQoImRpdiIpCiAgICAgICAgICAgICAgLnRleHQoIi0iKQogICAgICAgICAgICAgIC50ZXh0KCItIikKICAgICAgICAgICAgICAuc3R5bGUoImZvbnQtc2l6ZSIsICIyMHB4IikKICAgICAgICAgICAgICAuc3R5bGUoImJvcmRlci1yYWRpdXMiLCAiNTAlIikKICAgICAgICAgICAgICAuc3R5bGUoIndpZHRoIiwgIjIwcHgiKQogICAgICAgICAgICAgIC5zdHlsZSgiaGVpZ2h0IiwgIjIwcHgiKQogICAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbGlnbiIsICJjZW50ZXIiKQogICAgICAgICAgICAgIC5zdHlsZSgibGluZS1oZWlnaHQiLCAiMjBweCIpCiAgICAgICAgICAgICAgLnN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIiwgIiNENEUyQzgiKQogICAgICAgICAgICAgIC5zdHlsZSgiY29sb3IiLCAiIzY3OUQ0MyIpCiAgICAgICAgICAgICAgLm9uKCJjbGljayIsICgpID0+IGNvbnNvbGUubG9nKCJNaW51cyBjbGlja2VkIikpOwogICAgICAgICAgb3B0aW9ucy5hcHBlbmQoImRpdiIpCiAgICAgICAgICAgICAgLnRleHQoIkEiKQogICAgICAgICAgICAgIC5zdHlsZSgiZm9udC1zaXplIiwgIjE0cHgiKQogICAgICAgICAgICAgIC5zdHlsZSgiYm9yZGVyLXJhZGl1cyIsICI1MCUiKQogICAgICAgICAgICAgIC5zdHlsZSgid2lkdGgiLCAiMjBweCIpCiAgICAgICAgICAgICAgLnN0eWxlKCJoZWlnaHQiLCAiMjBweCIpCiAgICAgICAgICAgICAgLnN0eWxlKCJ0ZXh0LWFsaWduIiwgImNlbnRlciIpCiAgICAgICAgICAgICAgLnN0eWxlKCJiYWNrZ3JvdW5kLWNvbG9yIiwgIiNENEUyQzgiKQogICAgICAgICAgICAgIC5zdHlsZSgiY29sb3IiLCAiIzY3OUQ0MyIpCiAgICAgICAgICAgICAgLm9uKCJjbGljayIsICgpID0+IHRoYXQuY29udmVydFRvSW1hZ2UoZXZlbnQsIGQpKTsKICAgICAgICAgIGQzLnNlbGVjdCgiYm9keSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbG9zZXN0KCcub3B0aW9uLWJveCcpICYmICFldmVudC50YXJnZXQuY2xvc2VzdCgnY2lyY2xlJykpIHsKICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5vcHRpb24tYm94JykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfSk7CiAgCiAgCiAgICAgICAgbm9kZS5hcHBlbmQoInRleHQiKQogICAgICAgICAgICAuYXR0cigiZHkiLCAiMC4zMWVtIikKICAgICAgICAgICAgLmF0dHIoIngiLCBkID0+IGQuY2hpbGRyZW4gPyA2IDogNikKICAgICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgZCA9PiBkLmNoaWxkcmVuID8gImVuZCIgOiAic3RhcnQiKQogICAgICAgICAgICAvLyAudGV4dChkID0+IGQuZGF0YS5uYW1lKQogICAgICAgICAgICAudGV4dChkID0+IHsKICAgICAgICAgICAgICBpZiAoZC5kYXRhLmdyb3VwID09PSAyIHx8IGQuZGF0YS5ncm91cCA9PT0gMykgewogICAgICAgICAgICAgICAgcmV0dXJuIGAke2QuZGF0YS5uYW1lfWA7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5hdHRyKCJzdHJva2UiLCAid2hpdGUiKQogICAgICAgICAgICAuYXR0cigicGFpbnQtb3JkZXIiLCAic3Ryb2tlIik7CiAgCiAgICAgICAgbm9kZS5hcHBlbmQoInRpdGxlIikKICAgICAgICAgICAgLnRleHQoZCA9PiBgSUQ6ICR7ZC5kYXRhLm5hbWV9LCBEaXN0YW5jZTogJHtkLmRhdGEuZGlzdGFuY2V9YCk7CiAgCiAgICAgICAgdGhpcy51cGRhdGVUaHVtYm5haWwoKTsKICAKICAgICAgICBjb25zdCBsZWdlbmQgPSBzdmcuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGB0cmFuc2xhdGUoJHtvZmZoZWlnaHR9LCAke29mZndpZHRoICsgMTB9KWApCiAgICAgICAgICAgIC5hdHRyKCJmb250LWZhbWlseSIsICJzYW5zLXNlcmlmIikKICAgICAgICAgICAgLmF0dHIoImZvbnQtc2l6ZSIsIDEwKTsKICAKICAgICAgICBjb25zdCB1bmlxdWVHcm91cHMgPSBbMCwgMSwgMiwgM107CiAgICAgICAgCiAgCiAgICAgICAgY29uc3QgbGVnZW5kSXRlbXMgPSBsZWdlbmQuc2VsZWN0QWxsKCJnIikKICAgICAgICAgICAgLmRhdGEodW5pcXVlR3JvdXBzKQogICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoImciKQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgKGQsIGkpID0+IGB0cmFuc2xhdGUoMCwke2kgKiAyMH0pYCk7CiAgCiAgICAgICAgbGVnZW5kSXRlbXMuYXBwZW5kKCJyZWN0IikKICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgMTgpCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCAxOCkKICAgICAgICAgICAgLmF0dHIoImZpbGwiLCBkID0+IGdyb3VwQ29sb3JNYXBbZF0pCiAgCiAgICAgICAgbGVnZW5kSXRlbXMuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAgICAgLmF0dHIoIngiLCAyNCkKICAgICAgICAgICAgLmF0dHIoInkiLCA5KQogICAgICAgICAgICAuYXR0cigiZHkiLCAiMC4zNWVtIikKICAgICAgICAgICAgLnRleHQoZCA9PiB7CiAgICAgICAgICAgICAgaWYgKGQgPT09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiAic3RhcnQgbm9kZSI7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChkID09PSAxKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIm5vcm1hbCBub2RlIjsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQgPT09IDIpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiZ3Qmc2VhcmNoIGludGVyc2VjdGlvbiI7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChkID09PSAzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gInNlYXJjaCBvdGhlciI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAKICAgICAgfQogIAogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgIC4uLm1hcFN0YXRlKHsKICAgICAgICBkYXRhVHJlZTogImRhdGFUcmVlIiwKICAgICAgICBkYXRhTm9kZWxpbms6ICJkYXRhTm9kZUxpbmsiLAogICAgICAgIHJldHJpZXZhbFNldDogInJldHJpZXZhbFNldCIsCiAgICAgICAgZGF0YXNldE5hbWU6ICJkYXRhc2V0TmFtZSIsCiAgICAgICAgbW9kZWxOYW1lOiAibW9kZWxOYW1lIiwKICAgICAgICByZXRyaWV2YWxJbmZvOiAicmV0cmlldmFsSW5mbyIsCiAgICAgICAgaXNEb25lOiAiaXNEb25lIiAKICAgICAgfSksCiAgCiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgLy8gZGF0YVRyZWUobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgLy8gICBpZiAobmV3VmFsICE9PSBvbGRWYWwpIHsKCiAgICAgIC8vICAgfQogIAogICAgICAvLyB9LAogICAgICBzZWxlY3RlZFRhYihuZXdWYWwsIG9sZFZhbCkgewogICAgICAgIGlmIChuZXdWYWwgIT09IG9sZFZhbCkgewogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICB0aGlzLmdldFZpZXdTaXplKCk7CiAgICAgICAgICAgIHRoaXMuaW5pdEdyYXBoKHRoaXMudHJlZURhdGEpOwogICAgICAgICAgICB0aGlzLmluaXRUaHVtYm5haWwoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAg"},{"version":3,"sources":["TreeView.vue"],"names":[],"mappings":";;AASA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TreeView.vue","sourceRoot":"src/views/MainView/MiddleMainView","sourcesContent":["<template>\n    <div v-if=\"this.$store.state.isDone['Tree']\" class=\"tree-main\" ref=\"treeMain\">\n      <svg ref=\"tree\" class=\"tree-svg\"></svg>\n      <svg ref=\"thumbnailTree\" class=\"thumbnail-tree-svg\"></svg>\n    </div>\n  </template>\n  \n  <script>\n  \n  import * as d3 from \"d3\";\n  import {mapState} from \"vuex\";\n  import api from \"@/api/data\";\n  \n  export default {\n    name: \"TreeView\",\n    components: {},\n    data() {\n      return {\n        treeData: {},\n        svgWidth: 0,\n        svgHeight: 0,\n        velocityDecay: 0.6,\n        thumbnailTreeWidth: 0, // 缩略图宽度\n        thumbnailTreeHeight: 0, // 缩略图高度\n  \n      };\n    },\n    mounted() {\n          this.getViewSize();\n\n          this.treeData = this.$store.state.dataTree;\n          this.initGraph(this.treeData);\n\n          this.initThumbnail();\n  \n    },\n    methods: {\n      getViewSize() {\n        const tree = this.$refs.treeMain; // 之后修改\n        this.svgWidth = tree.clientWidth;\n        this.svgHeight = tree.clientHeight;\n  \n        this.thumbnailTreeWidth = this.svgWidth / 5;// 缩略图宽度\n        this.thumbnailTreeHeight = this.svgHeight / 5;\n      },\n      async convertToImage(event, node) {\n\n        const res = await api.getImageUrl({ \"datasetName\": this.$store.state.datasetName, \"nodeId\": +node.data.name });\n        const imageUrl = res[\"data\"][\"imageUrl\"];\n        const patternId = `pattern-${+node.data.name}`;\n        const targetElement = d3.select(event.target);\n  \n        const targetBBox = targetElement.node().getBBox();\n        const targetWidth = targetBBox.width;\n        const targetHeight = targetBBox.height;\n  \n        let pattern = d3.select(`#${patternId}`);\n        if (pattern.empty()) {\n          // 如果 pattern 不存在，则创建\n          const svg = d3.select(this.$refs.tree);\n  \n          // 确保 defs 存在\n          let defs = svg.select(\"defs\");\n          if (defs.empty()) {\n            defs = svg.append(\"defs\");\n          }\n  \n          const pattern = defs.append(\"pattern\")\n              .attr(\"id\", patternId)\n              .attr(\"patternUnits\", \"objectBoundingBox\")\n              .attr(\"width\", 1) // 宽度为 1 表示相对于目标元素的宽度\n              .attr(\"height\", 1) // 高度为 1 表示相对于目标元素的高度\n              .attr(\"patternTransform\", \"translate(1, 1)\"); // 向右和向下移动 10 个单位\n  \n          const image = pattern.append(\"image\")\n              .attr(\"xlink:href\", imageUrl)\n              .attr(\"width\", 58)\n              .attr(\"height\", 58)\n              .attr(\"preserveAspectRatio\", \"xMidYMid slice\");\n        }\n  \n        // 填充目标元素\n        targetElement\n            .attr(\"r\", 30)\n            .attr(\"fill\", `url(#${patternId})`)\n            .attr(\"stroke\", \"#000\") // 设置边框颜色\n            .attr(\"stroke-width\", 2); // 设置边框宽度\n      },\n      initThumbnail() {\n        const thumbnail = d3.select(this.$refs.thumbnailTree);\n        thumbnail\n            .attr(\"width\", this.thumbnailTreeWidth)\n            .attr(\"height\", this.thumbnailTreeHeight)\n            .attr(\"viewBox\", `0 0 ${this.thumbnailTreeWidth} ${this.thumbnailTreeHeight}`)\n            .attr(\"preserveAspectRatio\", \"xMidYMid meet\")\n            .attr(\"style\", \"position: absolute; top: 120px; right: 40px; border: 1px solid #ccc; background: #fff;\");\n      },\n      updateThumbnail() {\n        const that = this;\n        const thumbnail = d3.select(this.$refs.thumbnailTree);\n        thumbnail.selectAll(\"*\").remove();\n        const container = thumbnail.append(\"g\")\n            .attr(\"transform\", `scale(${that.thumbnailTreeWidth / that.svgWidth}, ${that.thumbnailTreeHeight / that.svgHeight}) translate(0, ${that.svgHeight / 2})`);\n  \n        // Clone legend and link nodes\n        const legendNode = d3.select(that.$refs.tree).select(`.nodes`).node().cloneNode(true);\n        const linkNode = d3.select(that.$refs.tree).select(`#linkTree`).node().cloneNode(true);\n  \n        container.append(() => legendNode);\n        container.append(() => linkNode);\n  \n      },\n      initGraph(dataObj) {\n        const that = this;\n        const width = that.svgWidth;\n        // parse data\n        const recall = dataObj[\"metric\"]['recall'];\n        const data = dataObj.treeData[\"0\"];\n        const root = d3.hierarchy(data);\n  \n        const dx = 30;\n        const dy = width / (root.height + 1);\n  \n        const tree = d3.tree().nodeSize([dx, dy]);\n  \n        root.sort((a, b) => d3.ascending(a.data.name, b.data.name));\n        tree(root);\n  \n        let x0 = Infinity;\n        let x1 = -x0;\n        root.each(d => {\n          if (d.x > x1) x1 = d.x;\n          if (d.x < x0) x0 = d.x;\n        });\n  \n        // 打印结果\n        const height = Math.max(x1 - x0 + dx * 2, that.svgHeight);\n  \n        d3.select(this.$refs[\"tree\"]).selectAll(\"*\").remove();\n  \n        const svg = d3.select(this.$refs[\"tree\"])\n            .attr(\"viewBox\", [-dy / 2, x0 - dx, width, height])\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .attr(\"style\", \"max-width: 100%; height: auto; font: 10px sans-serif;\")\n            .call(d3.zoom().on(\"zoom\", (event) => {\n              container.attr(\"transform\", event.transform);\n            }));\n  \n        const container = svg.append(\"g\");\n        // .attr(\"transform\", `translate(0, ${dx})`);\n        const offheight = -dy / 3;\n        const offwidth = x0 + dx / 3 * 2;\n        svg.append(\"text\")\n            .attr(\"transform\", `translate(${offheight}, ${offwidth})`)\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", 15)\n            .text(`Recall: ${recall}`);\n  \n        const link = container.append(\"g\")\n            .attr(\"class\", \"links\")\n            .attr(\"id\", `linkTree`)\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", \"#555\")\n            .attr(\"stroke-opacity\", 0.4)\n            .attr(\"stroke-width\", 1.5)\n            .selectAll()\n            .data(root.links())\n            .join(\"path\")\n            .attr(\"d\", d3.linkHorizontal()\n                .x(d => d.y)\n                .y(d => d.x));\n  \n        const node = container.append(\"g\")\n            .attr(\"class\", \"nodes\")\n            .attr(\"stroke-linejoin\", \"round\")\n            .attr(\"stroke-width\", 3)\n            .selectAll(\"g\")\n            .data(root.descendants())\n            .join(\"g\")\n            .attr(\"transform\", d => `translate(${d.y},${d.x})`);\n  \n  // 定义 border 元素\n        const border = container.append(\"g\")\n            .attr(\"class\", \"borders\")\n            .selectAll(\"circle\")\n            .data(root.descendants())\n            .join(\"circle\")\n            .attr(\"r\", 12)\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", \"none\")\n            .attr(\"stroke-width\", 2)\n            .attr(\"transform\", d => `translate(${d.y},${d.x})`)\n            .style(\"pointer-events\", \"none\"); // 禁止 border 元素接收鼠标事件\n  \n  // 将 border 元素放在 nodes 后面\n        border.raise();\n  \n  // 事件处理函数\n        node.on(\"mouseover\", function (event, d) {\n          // console.log(\"mouseover\", d.data.name);\n  \n          // 设置 border 元素的样式\n          border.attr(\"stroke\", b => b === d ? \"#6096E6\" : \"none\");\n  \n          // console.log(\"Node name on mouseover:\", d.data.name);\n        })\n            .on(\"mouseout\", function (event, d) {\n              // 移除 border 元素的样式\n              border.attr(\"stroke\", \"none\");\n            });\n  \n  \n        const groupColorMap = {\n          0: \"#FF0000\",\n          1: \"#A4D3EE\",\n          2: \"#32CD32\",\n          3: \"#FF7F50\",\n        };\n  \n        node.append(\"circle\")\n            .attr(\"fill\", d => groupColorMap[d.data.group] || \"#A4D3EE\")\n            .attr(\"id\", `nodeTree`)\n            .attr(\"r\", 10);\n  \n        node.on(\"click\", function (event, d) {\n          const existingBox = document.querySelector('.option-box');\n          if (existingBox) {\n            if (parseInt(existingBox.dataset.nodeId) === parseInt(d.id)) {\n              existingBox.remove();\n              return;\n            }\n            existingBox.remove();\n          }\n          const options = d3.select(\"body\").append(\"div\")\n              .attr(\"class\", \"option-box\")\n              .attr(\"data-node-id\", d.id)\n              .style(\"position\", \"absolute\")\n              .style(\"left\", `${event.pageX + 10}px`)\n              .style(\"top\", `${event.pageY + 10}px`)\n              .style(\"display\", \"flex\")\n              .style(\"gap\", \"8px\")\n              .style(\"border\", \"1px solid #7F7F7F\")\n              .style(\"background-color\", \"#F7F7F7\")\n              .style(\"width\", \"86px\")\n              .style(\"height\", \"25px\")\n              .style(\"padding\", \"2.5px 0\")\n              .style(\"padding-left\", \"8px\")\n              .style(\"border-radius\", \"8px\")\n              .style(\"align-items\", \"center\")\n              .style(\"z-index\", 1000);\n          options.append(\"div\")\n              .text(\"+\")\n              .style(\"font-size\", \"20px\")\n              .style(\"color\", \"#679D43\")\n              .style(\"border-radius\", \"50%\")\n              .style(\"width\", \"20px\")\n              .style(\"height\", \"20px\")\n              .style(\"text-align\", \"center\")\n              .style(\"line-height\", \"20px\")\n              .style(\"background-color\", \"#D4E2C8\")\n              .on(\"click\", () => console.log(\"Plus clicked\", d));\n          options.append(\"div\")\n              .text(\"-\")\n              .text(\"-\")\n              .style(\"font-size\", \"20px\")\n              .style(\"border-radius\", \"50%\")\n              .style(\"width\", \"20px\")\n              .style(\"height\", \"20px\")\n              .style(\"text-align\", \"center\")\n              .style(\"line-height\", \"20px\")\n              .style(\"background-color\", \"#D4E2C8\")\n              .style(\"color\", \"#679D43\")\n              .on(\"click\", () => console.log(\"Minus clicked\"));\n          options.append(\"div\")\n              .text(\"A\")\n              .style(\"font-size\", \"14px\")\n              .style(\"border-radius\", \"50%\")\n              .style(\"width\", \"20px\")\n              .style(\"height\", \"20px\")\n              .style(\"text-align\", \"center\")\n              .style(\"background-color\", \"#D4E2C8\")\n              .style(\"color\", \"#679D43\")\n              .on(\"click\", () => that.convertToImage(event, d));\n          d3.select(\"body\").on(\"click\", function (event) {\n            if (!event.target.closest('.option-box') && !event.target.closest('circle')) {\n              d3.selectAll('.option-box').remove();\n            }\n          });\n          event.stopPropagation();\n        });\n  \n  \n        node.append(\"text\")\n            .attr(\"dy\", \"0.31em\")\n            .attr(\"x\", d => d.children ? 6 : 6)\n            .attr(\"text-anchor\", d => d.children ? \"end\" : \"start\")\n            // .text(d => d.data.name)\n            .text(d => {\n              if (d.data.group === 2 || d.data.group === 3) {\n                return `${d.data.name}`;\n              } else {\n                return \"\";\n              }\n            })\n            .attr(\"stroke\", \"white\")\n            .attr(\"paint-order\", \"stroke\");\n  \n        node.append(\"title\")\n            .text(d => `ID: ${d.data.name}, Distance: ${d.data.distance}`);\n  \n        this.updateThumbnail();\n  \n        const legend = svg.append(\"g\")\n            .attr(\"transform\", `translate(${offheight}, ${offwidth + 10})`)\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", 10);\n  \n        const uniqueGroups = [0, 1, 2, 3];\n        \n  \n        const legendItems = legend.selectAll(\"g\")\n            .data(uniqueGroups)\n            .enter().append(\"g\")\n            .attr(\"transform\", (d, i) => `translate(0,${i * 20})`);\n  \n        legendItems.append(\"rect\")\n            .attr(\"width\", 18)\n            .attr(\"height\", 18)\n            .attr(\"fill\", d => groupColorMap[d])\n  \n        legendItems.append(\"text\")\n            .attr(\"x\", 24)\n            .attr(\"y\", 9)\n            .attr(\"dy\", \"0.35em\")\n            .text(d => {\n              if (d === 0) {\n                return \"start node\";\n              } else if (d === 1) {\n                return \"normal node\";\n              } else if (d === 2) {\n                return \"gt&search intersection\";\n              } else if (d === 3) {\n                return \"search other\";\n              }\n            });\n  \n      }\n  \n    },\n    computed: {\n      ...mapState({\n        dataTree: \"dataTree\",\n        dataNodelink: \"dataNodeLink\",\n        retrievalSet: \"retrievalSet\",\n        datasetName: \"datasetName\",\n        modelName: \"modelName\",\n        retrievalInfo: \"retrievalInfo\",\n        isDone: \"isDone\" \n      }),\n  \n    },\n    watch: {\n      // dataTree(newVal, oldVal) {\n      //   if (newVal !== oldVal) {\n\n      //   }\n  \n      // },\n      selectedTab(newVal, oldVal) {\n        if (newVal !== oldVal) {\n          this.$nextTick(() => {\n            this.getViewSize();\n            this.initGraph(this.treeData);\n            this.initThumbnail();\n          });\n        }\n      }\n    }\n  };\n  </script>\n  \n  <style scoped lang=\"scss\">\n  .tree-main {\n    height: 100%;\n    width: 100%;\n    overflow: auto;\n  \n    .tree-svg {\n      width: 100%;\n      height: 100%;\n    }\n  \n    .thumbnail-tree-svg {\n      position: absolute;\n      right: 20px;\n      top: 120px;\n      border: 1px solid #ccc;\n      background: #fff;\n    }\n  }\n  \n  .option-box {\n    border: 1px solid #F7F7F7;\n    background-color: #F7F7F7;\n    padding: 5px;\n    position: absolute;\n    z-index: 1000;\n  \n    div {\n      margin: 2px 0;\n      cursor: pointer;\n    }\n  \n    div:hover {\n      background-color: #f0f0f0;\n    }\n  }\n  \n  .option-button {\n    padding: 5px 10px;\n    border: 1px solid #000;\n    border-radius: 5px;\n    cursor: pointer;\n    background-color: #f0f0f0;\n    font-size: 14px;\n    font-family: Arial, sans-serif;\n    color: red;\n  }\n  \n  .option-button:hover {\n    background-color: #e0e0e0;\n  }\n  </style>"]}]}