{"remainingRequest":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/ResultView.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/yansha/VDProject/VDFrontend/src/views/MainView/RightMainView/ResultView.vue","mtime":1734619211228},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/babel-loader/lib/index.js","mtime":1735202380921},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1735202380381},{"path":"/home/yansha/VDProject/VDFrontend/node_modules/vue-loader/lib/index.js","mtime":1735202381045}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGFwaSBmcm9tICJAL2FwaS9kYXRhIjsKaW1wb3J0IEJveCBmcm9tICJAL2NvbXBvbmVudHMvQm94LnZ1ZSI7CmltcG9ydCB7IGluZGV4IH0gZnJvbSAiZDMiOwoKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJSZXN1bHRWaWV3IiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBCb3gKCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBxdWVyeUl0ZW1zOiBbXSwKICAgICAgICAgICAgcmV0cmlldmFsSXRlbXM6IFtdLAoKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIGdldFF1ZXJ5SXRlbXMoKSB7CgogICAgICAgICAgICAvLyDlhYjmnaXmnoTlu7rnrKzkuIDkuKogcXVlcnkg55qE57uT5p6cCiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBhcGkuZ2V0UXVlcnlJbmZvKHsgInJldHJpZXZhbFNldCI6IHRoaXMuJHN0b3JlLnN0YXRlLnJldHJpZXZhbFNldCB9KTsKICAgICAgICAgICAgbGV0IGltYWdlVXJsID0gcmVzWydkYXRhJ11bJ2ltYWdlVXJsJ10KICAgICAgICAgICAgbGV0IGltYWdlUGF0aCA9IHJlc1snZGF0YSddWydpbWFnZVBhdGgnXQogICAgICAgICAgICBsZXQgdGl0bGUgPSBgUTFfJHt0aGlzLiRzdG9yZS5zdGF0ZS5kYXRhc2V0TmFtZX1fJHt0aGlzLiRzdG9yZS5zdGF0ZS5tb2RlbE5hbWV9YDsKICAgICAgICAgICAgbGV0IGljb25DbGFzcyA9ICJlbC1pY29uLWluZm8iOwogICAgICAgICAgICBsZXQgdHlwZSA9ICdxdWVyeSc7CiAgICAgICAgICAgIGxldCBjb250ZW50cyA9IHsgaW1hZ2VVcmw6IGltYWdlVXJsLCBpbWFnZVBhdGg6IGltYWdlUGF0aCB9OwoKICAgICAgICAgICAgdGhpcy5xdWVyeUl0ZW1zLnB1c2goewogICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgICAgaWNvbkNsYXNzOiBpY29uQ2xhc3MsCiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgY29udGVudHM6IGNvbnRlbnRzCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBTdGF0ZSh7CiAgICAgICAgICAgIHJldHJpZXZhbFNldDogInJldHJpZXZhbFNldCIsCiAgICAgICAgICAgIGRhdGFzZXROYW1lOiAiZGF0YXNldE5hbWUiLAogICAgICAgICAgICBtb2RlbE5hbWU6ICJtb2RlbE5hbWUiLAogICAgICAgICAgICByZXRyaWV2YWxJbmZvOiAicmV0cmlldmFsSW5mbyIsCiAgICAgICAgICAgIHNlbGVjdGVkTm9kZTogInNlbGVjdGVkTm9kZSIKICAgICAgICB9KSwKICAgICAgICBnZXRJdGVtcygpIHsKCiAgICAgICAgICAgIGNvbnN0IGRhdGFzZXROYW1lID0gdGhpcy5yZXRyaWV2YWxTZXRbJ2RhdGFzZXROYW1lJ107CiAgICAgICAgICAgIGNvbnN0IG1vZGVsTmFtZSA9IHRoaXMucmV0cmlldmFsU2V0Wydtb2RlbE5hbWUnXTsKICAgICAgICAgICAgY29uc3QgaW5kZXhUeXBlID0gdGhpcy5yZXRyaWV2YWxTZXRbJ2luZGV4VHlwZSddOwogICAgICAgICAgICBjb25zdCBtZXRyaWMgPSB0aGlzLnJldHJpZXZhbFNldFsnbWV0cmljJ107CiAgICAgICAgICAgIGNvbnN0IHRvcEsgPSB0aGlzLnJldHJpZXZhbFNldFsndG9wSyddOwoKICAgICAgICAgICAgbGV0IHRpdGxlID0gYFExXyR7ZGF0YXNldE5hbWV9XyR7bW9kZWxOYW1lfV8ke2luZGV4VHlwZX1fJHttZXRyaWN9X1RvcCR7dG9wS31gOwogICAgICAgICAgICBsZXQgaWNvbkNsYXNzID0gImVsLWljb24taW5mbyI7CgogICAgICAgICAgICByZXR1cm4gW3sgInRpdGxlIjogdGl0bGUsICJpY29uQ2xhc3MiOiBpY29uQ2xhc3MgfV07CiAgICAgICAgfSwKICAgICAgICBnZXRSZXRyaWV2YWxJdGVtcygpIHsKCiAgICAgICAgICAgIC8vIOWFiOadpeaehOW7uuesrOS4gOS4qiBxdWVyeSDnmoTmo4DntKLnmoTnu5PmnpwKCiAgICAgICAgICAgIHRoaXMucmV0cmlldmFsSW5mby5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewoKICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IGBRMV8ke3RoaXMuJHN0b3JlLnN0YXRlLmRhdGFzZXROYW1lfV8ke3RoaXMuJHN0b3JlLnN0YXRlLm1vZGVsTmFtZX1gOwogICAgICAgICAgICAgICAgbGV0IGljb25DbGFzcyA9ICJlbC1pY29uLWluZm8iOwogICAgICAgICAgICAgICAgbGV0IHR5cGUgPSAncmV0cmlldmFsJzsKICAgICAgICAgICAgICAgIGxldCBpbWFnZVVybCA9IGl0ZW1bJ2ltYWdlVXJsJ10KICAgICAgICAgICAgICAgIGxldCBpbWFnZVBhdGggPSBpdGVtWydpbWFnZVBhdGgnXTsKICAgICAgICAgICAgICAgIGxldCBub2RlTGlzdCA9IGl0ZW1bJ25vZGVJRExpc3QnXQogICAgICAgICAgICAgICAgbGV0IHRvcEsgPSBpbmRleCArIDE7CiAgICAgICAgICAgICAgICBsZXQgY29udGVudHMgPSB7ICJpbWFnZVVybCI6IGltYWdlVXJsLCAiaW1hZ2VQYXRoIjogaW1hZ2VQYXRoIH07CiAgICAgICAgICAgICAgICBsZXQgaXNIaWdobGlnaHRlZCA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIHRoaXMucmV0cmlldmFsSXRlbXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgICAgICAgIGljb25DbGFzczogaWNvbkNsYXNzLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICAgICAgdG9wSzogdG9wSywKICAgICAgICAgICAgICAgICAgICBjb250ZW50czogY29udGVudHMsCiAgICAgICAgICAgICAgICAgICAgbm9kZUxpc3Q6IG5vZGVMaXN0LAogICAgICAgICAgICAgICAgICAgIGlzSGlnaGxpZ2h0ZWQ6IGlzSGlnaGxpZ2h0ZWQgIC8vIOmrmOS6ruagh+W/lwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV0cmlldmFsSXRlbXM7CiAgICAgICAgfSwKCiAgICB9LAoKICAgIHdhdGNoOiB7CiAgICAgICAgcmV0cmlldmFsU2V0KG5ld1ZhbCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygicXVlcnlpbmZvIiwgbmV3VmFsKTsKICAgICAgICAgICAgdGhpcy5nZXRRdWVyeUl0ZW1zKCk7CiAgICAgICAgICAgIC8vIHRoaXMuZ2V0UmV0cmlldmFsSXRlbXMoKTsKCiAgICAgICAgfQoKCiAgICB9LAoKfTsK"},{"version":3,"sources":["ResultView.vue"],"names":[],"mappings":";AAkCA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA","file":"ResultView.vue","sourceRoot":"src/views/MainView/RightMainView","sourcesContent":["<template>\n    <div v-if=\"this.$store.state.retrievalSet['topK']\" class=\"result-main\">\n\n        <el-collapse accordion>\n            <el-collapse-item v-for=\"(item, index) in getItems\" :key=\"index\">\n                <template slot=\"title\">\n                    {{ item.title }}\n                    <!-- <i :class=\"`header-icon ${item.iconClass}`\"></i> -->\n                </template>\n                <div class=\"query-main\">\n                    <div class=\"res-text\">query info</div>\n                    <Box v-if=\"queryItems.length > 0\" :items=\"queryItems\" />\n\n                </div>\n                <div class=\"retrieval-main\">\n                    <div class=\"res-text\">retrieval info</div>\n                    <Box v-if=\"getRetrievalItems.length > 0\" :items=\"getRetrievalItems\" />\n\n                </div>\n                <!-- <div class=\"gt-main\">\n                    <div class=\"res-text\">gt info</div>\n                    <Box :items=\"getSubItems\" />\n                </div> -->\n\n\n            </el-collapse-item>\n        </el-collapse>\n\n    </div>\n\n</template>\n\n\n<script>\nimport * as d3 from \"d3\";\nimport { mapState } from \"vuex\";\nimport api from \"@/api/data\";\nimport Box from \"@/components/Box.vue\";\nimport { index } from \"d3\";\n\n\nexport default {\n    name: \"ResultView\",\n    components: {\n        Box\n\n    },\n    data() {\n        return {\n            queryItems: [],\n            retrievalItems: [],\n\n        }\n    },\n    methods: {\n        async getQueryItems() {\n\n            // 先来构建第一个 query 的结果\n            let res = await api.getQueryInfo({ \"retrievalSet\": this.$store.state.retrievalSet });\n            let imageUrl = res['data']['imageUrl']\n            let imagePath = res['data']['imagePath']\n            let title = `Q1_${this.$store.state.datasetName}_${this.$store.state.modelName}`;\n            let iconClass = \"el-icon-info\";\n            let type = 'query';\n            let contents = { imageUrl: imageUrl, imagePath: imagePath };\n\n            this.queryItems.push({\n                title: title,\n                iconClass: iconClass,\n                type: type,\n                contents: contents\n            });\n        },\n    },\n    computed: {\n        ...mapState({\n            retrievalSet: \"retrievalSet\",\n            datasetName: \"datasetName\",\n            modelName: \"modelName\",\n            retrievalInfo: \"retrievalInfo\",\n            selectedNode: \"selectedNode\"\n        }),\n        getItems() {\n\n            const datasetName = this.retrievalSet['datasetName'];\n            const modelName = this.retrievalSet['modelName'];\n            const indexType = this.retrievalSet['indexType'];\n            const metric = this.retrievalSet['metric'];\n            const topK = this.retrievalSet['topK'];\n\n            let title = `Q1_${datasetName}_${modelName}_${indexType}_${metric}_Top${topK}`;\n            let iconClass = \"el-icon-info\";\n\n            return [{ \"title\": title, \"iconClass\": iconClass }];\n        },\n        getRetrievalItems() {\n\n            // 先来构建第一个 query 的检索的结果\n\n            this.retrievalInfo.forEach((item, index) => {\n\n                let title = `Q1_${this.$store.state.datasetName}_${this.$store.state.modelName}`;\n                let iconClass = \"el-icon-info\";\n                let type = 'retrieval';\n                let imageUrl = item['imageUrl']\n                let imagePath = item['imagePath'];\n                let nodeList = item['nodeIDList']\n                let topK = index + 1;\n                let contents = { \"imageUrl\": imageUrl, \"imagePath\": imagePath };\n                let isHighlighted = false;\n\n                this.retrievalItems.push({\n                    title: title,\n                    iconClass: iconClass,\n                    type: type,\n                    topK: topK,\n                    contents: contents,\n                    nodeList: nodeList,\n                    isHighlighted: isHighlighted  // 高亮标志\n                });\n\n            });\n            return this.retrievalItems;\n        },\n\n    },\n\n    watch: {\n        retrievalSet(newVal) {\n            console.log(\"queryinfo\", newVal);\n            this.getQueryItems();\n            // this.getRetrievalItems();\n\n        }\n\n\n    },\n\n};\n</script>\n\n<style scoped>\n.result-main {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.res-text {\n    font-size: 15px;\n}\n\n\n.result-main::v-deep .el-collapse-item__header {\n    font-size: 16px;\n\n}\n</style>"]}]}